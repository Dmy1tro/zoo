(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{XdoD:function(t,e,i){"use strict";i.r(e),i.d(e,"JobModule",(function(){return ct}));var s=i("ofXK"),b=i("tyNb"),c=i("XNiG"),a=i("1G5W"),o=i("Ojd6"),n=i("wFOr"),r=i("3Pt+"),l=i("0IaG"),d=i("fXoL"),h=i("NgpD"),u=i("tk/3");let m=(()=>{class t{constructor(t){this.httpClient=t}all(){return this.httpClient.get(h.a.jobs)}get(t){return this.httpClient.get(h.a.jobs+t)}getForEmployee(t){return this.httpClient.get(h.a.jobsForEmployee+t)}create(t){return this.httpClient.post(h.a.jobs,t)}startJob(t){return this.httpClient.put(h.a.jobsStart+t,null)}finishJob(t){return this.httpClient.put(h.a.jobsFinish+t,null)}update(t){return this.httpClient.put(h.a.jobs,t)}delete(t){return this.httpClient.delete(h.a.jobs+t)}}return t.\u0275fac=function(e){return new(e||t)(d.Zb(u.b))},t.\u0275prov=d.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("483E"),j=i("5eHb"),f=i("sYmb"),C=i("bTqV"),U=i("kmnG"),V=i("NFeN"),g=i("d3UM"),y=i("qFsG"),v=i("FKr1"),F=i("iadO");function S(t,e){if(1&t&&(d.Vb(0,"mat-option",17),d.Cc(1),d.Ub()),2&t){const t=e.$implicit;d.nc("value",t.id),d.Cb(1),d.Ec(" ",t.firstName+" "+t.lastName," ")}}function I(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Employee")," ",d.jc(3,4,"is-required")," "))}function E(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Title")," ",d.jc(3,4,"is-required")," "))}function D(t,e){if(1&t&&(d.Vb(0,"mat-option",17),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&t){const t=e.$implicit;d.nc("value",t.value),d.Cb(1),d.Ec(" ",d.jc(2,2,t.title)," ")}}function k(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Status")," ",d.jc(3,4,"is-required")," "))}function O(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Creation-date")," ",d.jc(3,4,"is-required")," "))}function w(t,e){if(1&t&&(d.Vb(0,"div",18),d.Vb(1,"div",14),d.Vb(2,"mat-form-field",6),d.Vb(3,"mat-label"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Vb(6,"mat-select",19),d.Bc(7,D,3,4,"mat-option",8),d.Ub(),d.Bc(8,k,4,6,"mat-error",9),d.Ub(),d.Ub(),d.Vb(9,"div",14),d.Vb(10,"mat-form-field",20),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Qb(14,"input",21),d.Qb(15,"mat-datepicker-toggle",22),d.Qb(16,"mat-datepicker",23,24),d.Bc(18,O,4,6,"mat-error",9),d.Ub(),d.Ub(),d.Vb(19,"div",14),d.Vb(20,"mat-form-field",20),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Qb(24,"input",25),d.Qb(25,"mat-datepicker-toggle",22),d.Qb(26,"mat-datepicker",23,26),d.Ub(),d.Ub(),d.Vb(28,"div",14),d.Vb(29,"mat-form-field",20),d.Vb(30,"mat-label"),d.Cc(31),d.ic(32,"translate"),d.Ub(),d.Qb(33,"input",27),d.Qb(34,"mat-datepicker-toggle",22),d.Qb(35,"mat-datepicker",23,28),d.Ub(),d.Ub(),d.Ub()),2&t){const t=d.sc(17),e=d.sc(27),i=d.sc(36),s=d.hc();d.Cb(4),d.Dc(d.jc(5,13,"Status")),d.Cb(3),d.nc("ngForOf",s.jobStatuses),d.Cb(1),d.nc("ngIf",s.hasCustomError(s.jobForm,"status")),d.Cb(4),d.Dc(d.jc(13,15,"Creation-date")),d.Cb(2),d.nc("matDatepicker",t),d.Cb(1),d.nc("for",t),d.Cb(3),d.nc("ngIf",s.hasCustomError(s.jobForm,"creationDate")),d.Cb(4),d.Dc(d.jc(23,17,"Start-date")),d.Cb(2),d.nc("matDatepicker",e),d.Cb(1),d.nc("for",e),d.Cb(6),d.Dc(d.jc(32,19,"Finish-date")),d.Cb(2),d.nc("matDatepicker",i),d.Cb(1),d.nc("for",i)}}let J=(()=>{class t{constructor(t,e,i,s,b,a,n){this.fb=t,this.jobService=e,this.employeeService=i,this.data=s,this.matDialogRef=b,this.toastr=a,this.translate=n,this.employees=[],this.isUpdate=!1,this.destroy$=new c.a,this.getButtonState=()=>this.translate.instant(Object(o.f)(null!=this.data.jobId,"Job")),this.hasCustomError=(t,e)=>Object(o.g)(t,e)}ngOnInit(){this.isUpdate=null!=this.data.jobId,this.jobStatuses=Object(o.e)(n.e),this.createForm(),this.getEmployees(),Object(o.b)(this.toastr)}createForm(){this.jobForm=this.fb.group({employeeId:[this.data.employeeId,r.q.required],title:[this.data.title,r.q.required],description:[this.data.description]}),this.isUpdate&&(this.jobForm.addControl("status",new r.d(this.data.status,r.q.required)),this.jobForm.addControl("creationDate",new r.d(this.data.creationDate,r.q.required)),this.jobForm.addControl("startDate",new r.d(this.data.startDate)),this.jobForm.addControl("finishDate",new r.d(this.data.finishDate)))}getEmployees(){this.employeeService.all().pipe(Object(a.a)(this.destroy$)).subscribe(t=>this.employees=t)}onSubmit(){this.jobForm.valid?null==this.data.jobId?this.create():this.update():this.jobForm.markAllAsTouched()}get showFullForm(){return this.isUpdate}create(){this.jobService.create(this.jobForm.value).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{this.toastr.success(this.translate.instant("Created"),this.translate.instant("Success")),this.matDialogRef.close({action:n.a.Create,data:t.createdId})},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}update(){this.jobService.update(Object.assign({jobId:this.data.jobId},this.jobForm.value)).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.translate.instant("Updated"),this.translate.instant("Success")),this.matDialogRef.close({action:n.a.Update,data:this.data.jobId})},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}resetForm(){this.createForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(d.Pb(r.c),d.Pb(m),d.Pb(p.a),d.Pb(l.a),d.Pb(l.e),d.Pb(j.b),d.Pb(f.e))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-create-update-job"]],decls:38,vars:18,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],["appearance","standard"],["formControlName","employeeId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","placeholder","title","formControlName","title"],["matInput","","placeholder","Some description","formControlName","description","rows","3"],["class","row",4,"ngIf"],[1,"row","px-2","mt-4"],[1,"col-md-6"],["mat-raised-button","","type","submit","color","primary",1,"btn-block"],["mat-raised-button","","type","button",1,"btn-block",3,"click"],[3,"value"],[1,"row"],["formControlName","status"],["color","primary","appearance","standard"],["matInput","","formControlName","creationDate",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker1",""],["matInput","","formControlName","startDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","finishDate",3,"matDatepicker"],["picker3",""]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Cc(5,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"h3",4),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Qb(9,"hr"),d.Vb(10,"form",5),d.dc("ngSubmit",(function(){return e.onSubmit()})),d.Vb(11,"mat-form-field",6),d.Vb(12,"mat-label"),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Vb(15,"mat-select",7),d.Bc(16,S,2,2,"mat-option",8),d.Ub(),d.Bc(17,I,4,6,"mat-error",9),d.Ub(),d.Vb(18,"mat-form-field",6),d.Vb(19,"mat-label"),d.Cc(20),d.ic(21,"translate"),d.Ub(),d.Qb(22,"input",10),d.Bc(23,E,4,6,"mat-error",9),d.Ub(),d.Vb(24,"mat-form-field",6),d.Vb(25,"mat-label"),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Qb(28,"textarea",11),d.Ub(),d.Bc(29,w,37,21,"div",12),d.Vb(30,"div",13),d.Vb(31,"div",14),d.Vb(32,"button",15),d.Cc(33),d.Ub(),d.Ub(),d.Vb(34,"div",14),d.Vb(35,"button",16),d.dc("click",(function(){return e.resetForm()})),d.Vb(36,"mat-icon"),d.Cc(37,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(7),d.Dc(d.jc(8,10,"Job")),d.Cb(3),d.nc("formGroup",e.jobForm),d.Cb(3),d.Dc(d.jc(14,12,"Employee")),d.Cb(3),d.nc("ngForOf",e.employees),d.Cb(1),d.nc("ngIf",e.hasCustomError(e.jobForm,"employeeId")),d.Cb(3),d.Dc(d.jc(21,14,"Title")),d.Cb(3),d.nc("ngIf",e.hasCustomError(e.jobForm,"title")),d.Cb(3),d.Dc(d.jc(27,16,"Description")),d.Cb(3),d.nc("ngIf",e.showFullForm),d.Cb(4),d.Ec(" ",e.getButtonState()," "))},directives:[C.a,U.g,l.c,V.a,r.r,r.l,r.f,U.c,U.f,g.a,r.k,r.e,s.k,s.l,y.b,r.b,v.n,U.b,F.b,F.d,F.a],pipes:[f.d],styles:[""]}),t})();var $=i("jaxi"),P=i("nYR2"),N=i("kar1");function x(t,e){if(1&t&&(d.Vb(0,"li",6),d.Vb(1,"span",7),d.Vb(2,"mat-icon"),d.Cc(3,"person"),d.Ub(),d.Vb(4,"b"),d.Cc(5),d.ic(6,"translate"),d.Ub(),d.Ub(),d.Qb(7,"br"),d.Vb(8,"span",8),d.Cc(9),d.Ub(),d.Ub()),2&t){const t=d.hc(2);d.Cb(5),d.Ec("",d.jc(6,2,"Responsible"),": "),d.Cb(4),d.Ec(" ",t.employee.firstName+" "+t.employee.lastName," ")}}function B(t,e){if(1&t){const t=d.Wb();d.Tb(0),d.Vb(1,"button",13),d.dc("click",(function(){return d.uc(t),d.hc(2).update()})),d.Cc(2),d.ic(3,"translate"),d.Ub(),d.Vb(4,"button",14),d.dc("click",(function(){return d.uc(t),d.hc(2).delete()})),d.Cc(5),d.ic(6,"translate"),d.Ub(),d.Sb()}2&t&&(d.Cb(2),d.Dc(d.jc(3,2,"Update")),d.Cb(3),d.Dc(d.jc(6,4,"Delete")))}function Q(t,e){if(1&t){const t=d.Wb();d.Vb(0,"button",17),d.dc("click",(function(){return d.uc(t),d.hc(3).startJob()})),d.Vb(1,"mat-icon"),d.Cc(2,"play_arrow"),d.Ub(),d.Cc(3),d.ic(4,"translate"),d.Ub()}2&t&&(d.Cb(3),d.Ec(" ",d.jc(4,1,"Start")," "))}function q(t,e){if(1&t){const t=d.Wb();d.Vb(0,"button",17),d.dc("click",(function(){return d.uc(t),d.hc(3).finishJob()})),d.Vb(1,"mat-icon"),d.Cc(2,"check_circle"),d.Ub(),d.Cc(3),d.ic(4,"translate"),d.Ub()}2&t&&(d.Cb(3),d.Ec(" ",d.jc(4,1,"Finish")," "))}function G(t,e){1&t&&(d.Vb(0,"button",18),d.Vb(1,"mat-icon",19),d.Cc(2,"check"),d.Ub(),d.Cc(3),d.ic(4,"translate"),d.Ub()),2&t&&(d.Cb(3),d.Ec(" ",d.jc(4,1,"Finished")," "))}function A(t,e){if(1&t&&(d.Tb(0),d.Bc(1,Q,5,3,"button",15),d.Bc(2,q,5,3,"button",15),d.Bc(3,G,5,3,"button",16),d.Sb()),2&t){const t=d.hc(2);d.Cb(1),d.nc("ngIf","Created"===t.job.status),d.Cb(1),d.nc("ngIf","InProgress"===t.job.status),d.Cb(1),d.nc("ngIf","Finished"===t.job.status)}}function M(t,e){if(1&t&&(d.Vb(0,"div",1),d.Vb(1,"div",2),d.Vb(2,"h4",3),d.Cc(3),d.Ub(),d.Ub(),d.Vb(4,"div",4),d.Vb(5,"ul",5),d.Vb(6,"li",6),d.Vb(7,"span",7),d.Vb(8,"mat-icon"),d.Cc(9,"description"),d.Ub(),d.Vb(10,"b"),d.Cc(11),d.ic(12,"translate"),d.Ub(),d.Ub(),d.Qb(13,"br"),d.Vb(14,"span",8),d.Cc(15),d.Ub(),d.Ub(),d.Bc(16,x,10,4,"li",9),d.Vb(17,"li",6),d.Vb(18,"span",7),d.Vb(19,"mat-icon"),d.Cc(20,"info"),d.Ub(),d.Vb(21,"b"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Ub(),d.Qb(24,"br"),d.Vb(25,"span",8),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Ub(),d.Vb(28,"li",6),d.Vb(29,"span",7),d.Vb(30,"mat-icon"),d.Cc(31,"perm_contact_calendar"),d.Ub(),d.Vb(32,"b"),d.Cc(33),d.ic(34,"translate"),d.Ub(),d.Ub(),d.Qb(35,"br"),d.Vb(36,"span",8),d.Cc(37),d.ic(38,"date"),d.Ub(),d.Ub(),d.Vb(39,"li",6),d.Vb(40,"span",7),d.Vb(41,"mat-icon"),d.Cc(42,"perm_contact_calendar"),d.Ub(),d.Vb(43,"b"),d.Cc(44),d.ic(45,"translate"),d.Ub(),d.Ub(),d.Qb(46,"br"),d.Vb(47,"span",8),d.Cc(48),d.ic(49,"date"),d.ic(50,"translate"),d.Ub(),d.Ub(),d.Vb(51,"li",6),d.Vb(52,"span",7),d.Vb(53,"mat-icon"),d.Cc(54,"perm_contact_calendar"),d.Ub(),d.Vb(55,"b"),d.Cc(56),d.ic(57,"translate"),d.Ub(),d.Ub(),d.Qb(58,"br"),d.Vb(59,"span",8),d.Cc(60),d.ic(61,"date"),d.ic(62,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(63,"div",10),d.Vb(64,"div",11),d.Bc(65,B,7,6,"ng-container",12),d.Bc(66,A,4,3,"ng-container",12),d.Ub(),d.Ub(),d.Ub()),2&t){const t=d.hc();d.Cb(3),d.Ec(" ",t.job.title," "),d.Cb(8),d.Ec("",d.jc(12,14,"Description"),": "),d.Cb(4),d.Ec(" ",null!=t.job.description?t.job.description:"No description"," "),d.Cb(1),d.nc("ngIf",t.employee),d.Cb(6),d.Ec("",d.jc(23,16,"Status"),": "),d.Cb(4),d.Ec(" ",d.jc(27,18,t.jobStatus[t.job.status])," "),d.Cb(7),d.Ec("",d.jc(34,20,"Creation-date"),": "),d.Cb(4),d.Ec(" ",d.kc(38,22,t.job.creationDate,"medium")," "),d.Cb(7),d.Ec("",d.jc(45,25,"Start-date"),": "),d.Cb(4),d.Ec(" ",null!==t.job.startDate?d.kc(49,27,t.job.startDate,"medium"):d.jc(50,30,"Not-started")," "),d.Cb(8),d.Ec("",d.jc(57,32,"Finish-date"),": "),d.Cb(4),d.Ec(" ",null!==t.job.finishDate?d.kc(61,34,t.job.finishDate,"medium"):d.jc(62,37,"Not-finished")," "),d.Cb(5),d.nc("ngIf",t.isManager),d.Cb(1),d.nc("ngIf",t.canDoJob)}}let T=(()=>{class t{constructor(t,e,i,s,b,a){this.jobService=t,this.employeeService=e,this.authService=i,this.toastr=s,this.dialog=b,this.translate=a,this.jobChanged=new d.o,this.jobStatus=n.e,this.canDoJob=!1,this.destroy$=new c.a}ngOnInit(){this.initValues(),Object(o.b)(this.toastr)}initValues(){this.canDoJob=this.job.employeeId===this.authService.getCurrentUser.id,this.getEmployee()}getEmployee(){this.employee&&this.job.employeeId===this.employee.id||this.employeeService.get(this.job.employeeId).pipe(Object(a.a)(this.destroy$)).subscribe(t=>this.employee=t)}refreshJob(){this.jobService.get(this.job.jobId).pipe(Object(P.a)(()=>this.getEmployee()),Object(a.a)(this.destroy$)).subscribe(t=>{this.job=t,this.jobChanged.emit({data:this.job,action:n.a.Update})})}update(){this.dialog.open(J,{width:"34%",autoFocus:!0,data:this.job}).afterClosed().pipe(Object(a.a)(this.destroy$)).subscribe(()=>this.refreshJob())}delete(){Object(o.d)(this.translate.instant("Job")+": "+this.job.title,this.translate)&&this.jobService.delete(this.job.jobId).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.translate.instant("Deleted"),this.translate.instant("Success")),this.jobChanged.emit({data:this.job,action:n.a.Delete}),this.job=null},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}startJob(){this.jobService.startJob(this.job.jobId).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.translate.instant("Started"),this.translate.instant("Success")),this.refreshJob()},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}finishJob(){this.jobService.finishJob(this.job.jobId).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.translate.instant("Finished"),this.translate.instant("Success")),this.refreshJob()},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}get isManager(){return this.authService.isManager}ngOnChanges(){this.initValues()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(d.Pb(m),d.Pb(p.a),d.Pb(N.a),d.Pb(j.b),d.Pb(l.b),d.Pb(f.e))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-job-info"]],inputs:{job:"job"},outputs:{jobChanged:"jobChanged"},features:[d.Ab],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body","my-auto"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"d-inline-flex"],[1,"ml-1"],["class","list-group-item",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-content-center"],[4,"ngIf"],[1,"btn","btn-warning","mx-1",3,"click"],[1,"btn","btn-danger","mx-1",3,"click"],["mat-raised-button","","class","w-50","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","disabled","","class","w-50",4,"ngIf"],["mat-raised-button","","color","primary",1,"w-50",3,"click"],["mat-raised-button","","disabled","",1,"w-50"],[1,"mr-1"]],template:function(t,e){1&t&&d.Bc(0,M,67,39,"div",0),2&t&&d.nc("ngIf",e.job)},directives:[s.l,V.a,C.a],pipes:[f.d,s.e],styles:[""]}),t})();function W(t,e){if(1&t&&(d.Vb(0,"mat-option",8),d.Cc(1),d.Ub()),2&t){const t=e.$implicit;d.nc("value",t.id),d.Cb(1),d.Ec(" ",t.firstName+" "+t.lastName," ")}}function _(t,e){if(1&t&&(d.Vb(0,"mat-option",8),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&t){const t=e.$implicit;d.nc("value",t.value),d.Cb(1),d.Ec(" ",d.jc(2,2,t.title)," ")}}function L(t,e){if(1&t){const t=d.Wb();d.Vb(0,"tr",17),d.Vb(1,"td",25),d.Cc(2),d.Ub(),d.Vb(3,"td",10),d.Cc(4),d.ic(5,"date"),d.Ub(),d.Vb(6,"td",12),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Vb(9,"td",25),d.Vb(10,"button",26),d.dc("click",(function(){d.uc(t);const i=e.$implicit;return d.hc().selectJob(i)})),d.Vb(11,"mat-icon",27),d.Cc(12,"info"),d.Ub(),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Ub(),d.Ub()}if(2&t){const t=e.$implicit,i=d.hc();d.Cb(2),d.Ec(" ",t.title," "),d.Cb(2),d.Ec(" ",d.kc(5,6,t.creationDate,"medium")," "),d.Cb(3),d.Ec(" ",d.jc(8,9,i.jobStatus[t.status])," "),d.Cb(3),d.Gb("disabled",i.jobSelected&&i.jobSelected.jobId===t.jobId),d.Cb(3),d.Ec(" ",d.jc(14,11,"Info")," ")}}function R(t,e){1&t&&(d.Vb(0,"tr"),d.Vb(1,"td"),d.Vb(2,"p"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(3),d.Dc(d.jc(4,1,"Empty")))}function X(t,e){if(1&t){const t=d.Wb();d.Vb(0,"div",10),d.Vb(1,"div",2),d.Vb(2,"h3"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Qb(5,"hr"),d.Vb(6,"app-job-info",28),d.dc("jobChanged",(function(e){return d.uc(t),d.hc().jobChanged(e)})),d.Ub(),d.Ub()}if(2&t){const t=d.hc();d.Cb(3),d.Dc(d.jc(4,2,"Info")),d.Cb(3),d.nc("job",t.jobSelected)}}let K=(()=>{class t{constructor(t,e,i,s,b,a,o){this.fb=t,this.route=e,this.jobService=i,this.employeeService=s,this.toastr=b,this.dialog=a,this.translate=o,this.employeeId=null,this.jobs=[],this.jobsFiltered=[],this.jobSelected=null,this.employees=[],this.jobStatus=n.e,this.destroy$=new c.a}ngOnInit(){this.route.snapshot.params.employeeId&&(this.employeeId=this.route.snapshot.params.employeeId),this.jobStatuses=Object(o.e)(n.e),this.createForm(),this.getJobs(),this.getEmployees(),Object(o.b)(this.toastr)}createForm(){var t;this.filterForm=this.fb.group({employeeId:null!==(t=this.employeeId)&&void 0!==t?t:"*",status:"*"})}getJobs(){this.employeeId?this.getJobsForEmployee(this.employeeId):this.getAllJobs()}getAllJobs(){this.jobService.all().pipe(Object(a.a)(this.destroy$)).subscribe(t=>{this.jobs=t,this.jobsFiltered=this.jobs})}getJobsForEmployee(t){this.jobService.getForEmployee(t).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{this.jobs=t,this.jobsFiltered=this.jobs})}getEmployees(){this.employeeService.all().pipe(Object(a.a)(this.destroy$)).subscribe(t=>this.employees=t)}selectEmployee(t){this.employeeId="*"===t?null:t,this.getJobs()}selectStatus(t){this.jobsFiltered="*"!==t?this.jobs.filter(e=>e.status===t):this.jobs}selectJob(t){this.jobSelected=t}create(){const t=this.getDefaultFob();this.dialog.open(J,{width:"30%",autoFocus:!0,data:t}).afterClosed().pipe(Object(a.a)(this.destroy$)).subscribe(t=>{t&&this.refreshData(t)})}jobChanged(t){Object(o.i)(t.action,this.jobs,t.data,e=>e.jobId===t.data.jobId)}resetForm(){this.createForm(),this.jobsFiltered=this.jobs,this.jobSelected=null}refreshData(t){const e=t.data,i=t.action;this.jobService.get(e).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{Object(o.i)(i,this.jobs,t,t=>t.jobId===e),this.jobSelected&&this.jobSelected.jobId===e&&(this.jobSelected=t)})}getDefaultFob(){return{employeeId:this.employeeId,jobId:null,title:null,description:null,status:null,startDate:null,creationDate:null,finishDate:null}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(d.Pb(r.c),d.Pb(b.a),d.Pb(m),d.Pb(p.a),d.Pb(j.b),d.Pb(l.b),d.Pb(f.e))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-job-list"]],decls:56,vars:35,consts:[[1,"row","pl-1"],[1,"col-md-8"],[1,"text-center","my-2"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-5"],["appearance","standard"],["formControlName","employeeId",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["formControlName","status",3,"selectionChange"],[1,"col-md-2"],[1,"my-auto"],[3,"click"],[1,"table","table-bordered","text-center","mt-2"],[1,"thead-light"],[1,"d-flex"],["scope","col",1,"col-md-3"],["scope","col",1,"col-md-4"],["scope","col",1,"col-md-2"],["mat-raised-button","","color","primary",1,"btn","btn-sm","w-75",3,"click"],["class","d-flex",4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"col-md-3"],[1,"btn","btn-info","w-75","d-inline-flex","justify-content-center",3,"click"],[1,"mr-1"],[3,"job","jobChanged"]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"h3"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Ub(),d.Qb(6,"hr"),d.Vb(7,"form",3),d.Vb(8,"div",4),d.Vb(9,"div",5),d.Vb(10,"mat-form-field",6),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Vb(14,"mat-select",7),d.dc("selectionChange",(function(t){return e.selectEmployee(t.value)})),d.Vb(15,"mat-option",8),d.Cc(16),d.ic(17,"translate"),d.Ub(),d.Bc(18,W,2,2,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",10),d.Vb(20,"mat-form-field",6),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Vb(24,"mat-select",11),d.dc("selectionChange",(function(t){return e.selectStatus(t.value)})),d.Vb(25,"mat-option",8),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Bc(28,_,3,4,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(29,"div",12),d.Vb(30,"mat-button-toggle-group",13),d.Vb(31,"mat-button-toggle",14),d.dc("click",(function(){return e.resetForm()})),d.Vb(32,"mat-icon"),d.Cc(33,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(34,"table",15),d.Vb(35,"thead",16),d.Vb(36,"tr",17),d.Vb(37,"th",18),d.Cc(38),d.ic(39,"translate"),d.Ub(),d.Vb(40,"th",19),d.Cc(41),d.ic(42,"translate"),d.Ub(),d.Vb(43,"th",20),d.Cc(44),d.ic(45,"translate"),d.Ub(),d.Vb(46,"th",18),d.Vb(47,"button",21),d.dc("click",(function(){return e.create()})),d.Vb(48,"mat-icon"),d.Cc(49,"add"),d.Ub(),d.Cc(50),d.ic(51,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(52,"tbody"),d.Bc(53,L,15,13,"tr",22),d.Bc(54,R,5,3,"tr",23),d.Ub(),d.Ub(),d.Ub(),d.Bc(55,X,7,4,"div",24),d.Ub()),2&t&&(d.Cb(4),d.Dc(d.jc(5,17,"Job-management")),d.Cb(3),d.nc("formGroup",e.filterForm),d.Cb(5),d.Dc(d.jc(13,19,"Employee")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(17,21,"All")," "),d.Cb(2),d.nc("ngForOf",e.employees),d.Cb(4),d.Dc(d.jc(23,23,"Status")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(27,25,"All")," "),d.Cb(2),d.nc("ngForOf",e.jobStatuses),d.Cb(10),d.Ec(" ",d.jc(39,27,"Title")," "),d.Cb(3),d.Ec(" ",d.jc(42,29,"Creation-date")," "),d.Cb(3),d.Ec(" ",d.jc(45,31,"Status")," "),d.Cb(6),d.Ec(" ",d.jc(51,33,"Create")," "),d.Cb(3),d.nc("ngForOf",e.jobsFiltered),d.Cb(1),d.nc("ngIf",0===e.jobsFiltered.length),d.Cb(1),d.nc("ngIf",e.jobSelected))},directives:[r.r,r.l,r.f,U.c,U.f,g.a,r.k,r.e,v.n,s.k,$.b,$.a,V.a,C.a,s.l,T],pipes:[f.d,s.e],styles:[""]}),t})();function Y(t,e){if(1&t&&(d.Vb(0,"mat-option",8),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&t){const t=e.$implicit;d.nc("value",t.value),d.Cb(1),d.Ec(" ",d.jc(2,2,t.title)," ")}}function H(t,e){if(1&t){const t=d.Wb();d.Vb(0,"tr",14),d.Vb(1,"td",5),d.Cc(2),d.Ub(),d.Vb(3,"td",21),d.Cc(4),d.ic(5,"date"),d.Ub(),d.Vb(6,"td",22),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Vb(9,"td",5),d.Vb(10,"button",23),d.dc("click",(function(){d.uc(t);const i=e.$implicit;return d.hc().selectJob(i)})),d.Vb(11,"mat-icon",24),d.Cc(12,"info"),d.Ub(),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Ub(),d.Ub()}if(2&t){const t=e.$implicit,i=d.hc();d.Cb(2),d.Ec(" ",t.title," "),d.Cb(2),d.Ec(" ",d.kc(5,6,t.creationDate,"medium")," "),d.Cb(3),d.Ec(" ",d.jc(8,9,i.jobStatus[t.status])," "),d.Cb(3),d.Gb("disabled",i.jobSelected&&i.jobSelected.jobId===t.jobId),d.Cb(3),d.Ec(" ",d.jc(14,11,"Info")," ")}}function Z(t,e){1&t&&(d.Vb(0,"tr"),d.Vb(1,"td"),d.Vb(2,"p"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(3),d.Dc(d.jc(4,1,"Empty")))}function z(t,e){if(1&t){const t=d.Wb();d.Vb(0,"div",21),d.Vb(1,"div",2),d.Vb(2,"h3"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Qb(5,"hr"),d.Vb(6,"app-job-info",25),d.dc("jobChanged",(function(e){return d.uc(t),d.hc().jobChanged(e)})),d.Ub(),d.Ub()}if(2&t){const t=d.hc();d.Cb(3),d.Dc(d.jc(4,2,"Info")),d.Cb(3),d.nc("job",t.jobSelected)}}let tt=(()=>{class t{constructor(t,e,i,s,b){this.fb=t,this.jobService=e,this.authService=i,this.toastr=s,this.translate=b,this.jobStatus=n.e,this.jobs=[],this.jobsFiltered=[],this.jobSelected=null,this.currentUser=null,this.destroy$=new c.a}ngOnInit(){this.currentUser=this.authService.getCurrentUser,this.jobStatuses=Object(o.e)(n.e),this.createForm(),this.getJobs(),Object(o.b)(this.toastr)}createForm(){this.filterForm=this.fb.group({status:"*"})}getJobs(){this.jobService.getForEmployee(this.currentUser.id).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{this.jobs=t,this.jobsFiltered=this.jobs})}selectStatus(t){this.jobsFiltered="*"!==t?this.jobs.filter(e=>e.status===t):this.jobs}selectJob(t){this.jobSelected=t}jobChanged(t){Object(o.i)(t.action,this.jobs,t.data,e=>e.jobId===t.data.jobId)}resetForm(){this.createForm(),this.jobsFiltered=this.jobs,this.jobSelected=null}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(d.Pb(r.c),d.Pb(m),d.Pb(N.a),d.Pb(j.b),d.Pb(f.e))},t.\u0275cmp=d.Jb({type:t,selectors:[["app-personal-jobs"]],decls:43,vars:27,consts:[[1,"row","pl-1"],[1,"col-md-8"],[1,"text-center","my-2"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-3"],["appearance","standard"],["formControlName","status",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"my-auto"],[3,"click"],[1,"table","table-bordered","text-center","mt-2"],[1,"thead-light"],[1,"d-flex"],["scope","col",1,"col-md-3"],["scope","col",1,"col-md-4"],["scope","col",1,"col-md-2"],["class","d-flex",4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"col-md-4"],[1,"col-md-2"],[1,"btn","btn-info","w-75","d-inline-flex","justify-content-center",3,"click"],[1,"mr-1"],[3,"job","jobChanged"]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"h3"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Ub(),d.Qb(6,"hr"),d.Vb(7,"form",3),d.Vb(8,"div",4),d.Vb(9,"div",5),d.Vb(10,"mat-form-field",6),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Vb(14,"mat-select",7),d.dc("selectionChange",(function(t){return e.selectStatus(t.value)})),d.Vb(15,"mat-option",8),d.Cc(16),d.ic(17,"translate"),d.Ub(),d.Bc(18,Y,3,4,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",5),d.Vb(20,"mat-button-toggle-group",10),d.Vb(21,"mat-button-toggle",11),d.dc("click",(function(){return e.resetForm()})),d.Vb(22,"mat-icon"),d.Cc(23,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(24,"table",12),d.Vb(25,"thead",13),d.Vb(26,"tr",14),d.Vb(27,"th",15),d.Cc(28),d.ic(29,"translate"),d.Ub(),d.Vb(30,"th",16),d.Cc(31),d.ic(32,"translate"),d.Ub(),d.Vb(33,"th",17),d.Cc(34),d.ic(35,"translate"),d.Ub(),d.Vb(36,"th",15),d.Cc(37),d.ic(38,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Vb(39,"tbody"),d.Bc(40,H,15,13,"tr",18),d.Bc(41,Z,5,3,"tr",19),d.Ub(),d.Ub(),d.Ub(),d.Bc(42,z,7,4,"div",20),d.Ub()),2&t&&(d.Cb(4),d.Dc(d.jc(5,13,"My-jobs")),d.Cb(3),d.nc("formGroup",e.filterForm),d.Cb(5),d.Dc(d.jc(13,15,"Status")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(17,17,"All")," "),d.Cb(2),d.nc("ngForOf",e.jobStatuses),d.Cb(10),d.Ec(" ",d.jc(29,19,"Title")," "),d.Cb(3),d.Ec(" ",d.jc(32,21,"Creation-date")," "),d.Cb(3),d.Ec(" ",d.jc(35,23,"Status")," "),d.Cb(3),d.Ec(" ",d.jc(38,25,"Details")," "),d.Cb(3),d.nc("ngForOf",e.jobsFiltered),d.Cb(1),d.nc("ngIf",0===e.jobsFiltered.length),d.Cb(1),d.nc("ngIf",e.jobSelected))},directives:[r.r,r.l,r.f,U.c,U.f,g.a,r.k,r.e,v.n,s.k,$.b,$.a,V.a,s.l,T],pipes:[f.d,s.e],styles:[""]}),t})();var et=i("4Q6e");const it=[{path:"",redirectTo:"job-list",pathMatch:"full",canLoad:[et.a],canActivate:[et.a]},{path:"job-list/:employeeId",component:K,canLoad:[et.a],canActivate:[et.a]},{path:"job-list",component:K,canLoad:[et.a],canActivate:[et.a]},{path:"personal-jobs",component:tt}];let st=(()=>{class t{}return t.\u0275mod=d.Nb({type:t}),t.\u0275inj=d.Mb({factory:function(e){return new(e||t)},imports:[[b.e.forChild(it)],b.e]}),t})();var bt=i("PCNd");let ct=(()=>{class t{}return t.\u0275mod=d.Nb({type:t}),t.\u0275inj=d.Mb({factory:function(e){return new(e||t)},imports:[[s.c,st,bt.a]]}),t})()}}]);