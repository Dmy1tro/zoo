function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var c=e[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{XdoD:function(t,e,a){"use strict";a.r(e),a.d(e,"JobModule",(function(){return dt}));var c,i=a("ofXK"),n=a("tyNb"),o=a("XNiG"),b=a("1G5W"),s=a("Ojd6"),r=a("wFOr"),l=a("3Pt+"),u=a("0IaG"),d=a("fXoL"),h=a("NgpD"),f=a("tk/3"),m=((c=function(){function t(e){_classCallCheck(this,t),this.httpClient=e}return _createClass(t,[{key:"all",value:function(){return this.httpClient.get(h.a.jobs)}},{key:"get",value:function(t){return this.httpClient.get(h.a.jobs+t)}},{key:"getForEmployee",value:function(t){return this.httpClient.get(h.a.jobsForEmployee+t)}},{key:"create",value:function(t){return this.httpClient.post(h.a.jobs,t)}},{key:"startJob",value:function(t){return this.httpClient.put(h.a.jobsStart+t,null)}},{key:"finishJob",value:function(t){return this.httpClient.put(h.a.jobsFinish+t,null)}},{key:"update",value:function(t){return this.httpClient.put(h.a.jobs,t)}},{key:"delete",value:function(t){return this.httpClient.delete(h.a.jobs+t)}}]),t}()).\u0275fac=function(t){return new(t||c)(d.Zb(f.b))},c.\u0275prov=d.Lb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),p=a("483E"),C=a("5eHb"),j=a("sYmb"),v=a("bTqV"),U=a("kmnG"),y=a("NFeN"),V=a("d3UM"),g=a("qFsG"),k=a("FKr1"),F=a("iadO");function S(t,e){if(1&t&&(d.Vb(0,"mat-option",17),d.Cc(1),d.Ub()),2&t){var a=e.$implicit;d.nc("value",a.id),d.Cb(1),d.Ec(" ",a.firstName+" "+a.lastName," ")}}function I(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Employee")," ",d.jc(3,4,"is-required")," "))}function E(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Title")," ",d.jc(3,4,"is-required")," "))}function D(t,e){if(1&t&&(d.Vb(0,"mat-option",17),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&t){var a=e.$implicit;d.nc("value",a.value),d.Cb(1),d.Ec(" ",d.jc(2,2,a.title)," ")}}function O(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Status")," ",d.jc(3,4,"is-required")," "))}function w(t,e){1&t&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&t&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Creation-date")," ",d.jc(3,4,"is-required")," "))}function J(t,e){if(1&t&&(d.Vb(0,"div",18),d.Vb(1,"div",14),d.Vb(2,"mat-form-field",6),d.Vb(3,"mat-label"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Vb(6,"mat-select",19),d.Bc(7,D,3,4,"mat-option",8),d.Ub(),d.Bc(8,O,4,6,"mat-error",9),d.Ub(),d.Ub(),d.Vb(9,"div",14),d.Vb(10,"mat-form-field",20),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Qb(14,"input",21),d.Qb(15,"mat-datepicker-toggle",22),d.Qb(16,"mat-datepicker",23,24),d.Bc(18,w,4,6,"mat-error",9),d.Ub(),d.Ub(),d.Vb(19,"div",14),d.Vb(20,"mat-form-field",20),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Qb(24,"input",25),d.Qb(25,"mat-datepicker-toggle",22),d.Qb(26,"mat-datepicker",23,26),d.Ub(),d.Ub(),d.Vb(28,"div",14),d.Vb(29,"mat-form-field",20),d.Vb(30,"mat-label"),d.Cc(31),d.ic(32,"translate"),d.Ub(),d.Qb(33,"input",27),d.Qb(34,"mat-datepicker-toggle",22),d.Qb(35,"mat-datepicker",23,28),d.Ub(),d.Ub(),d.Ub()),2&t){var a=d.sc(17),c=d.sc(27),i=d.sc(36),n=d.hc();d.Cb(4),d.Dc(d.jc(5,13,"Status")),d.Cb(3),d.nc("ngForOf",n.jobStatuses),d.Cb(1),d.nc("ngIf",n.hasCustomError(n.jobForm,"status")),d.Cb(4),d.Dc(d.jc(13,15,"Creation-date")),d.Cb(2),d.nc("matDatepicker",a),d.Cb(1),d.nc("for",a),d.Cb(3),d.nc("ngIf",n.hasCustomError(n.jobForm,"creationDate")),d.Cb(4),d.Dc(d.jc(23,17,"Start-date")),d.Cb(2),d.nc("matDatepicker",c),d.Cb(1),d.nc("for",c),d.Cb(6),d.Dc(d.jc(32,19,"Finish-date")),d.Cb(2),d.nc("matDatepicker",i),d.Cb(1),d.nc("for",i)}}var $,P=(($=function(){function t(e,a,c,i,n,b,r){var l=this;_classCallCheck(this,t),this.fb=e,this.jobService=a,this.employeeService=c,this.data=i,this.matDialogRef=n,this.toastr=b,this.translate=r,this.employees=[],this.isUpdate=!1,this.destroy$=new o.a,this.getButtonState=function(){return l.translate.instant(Object(s.f)(null!=l.data.jobId,"Job"))},this.hasCustomError=function(t,e){return Object(s.g)(t,e)}}return _createClass(t,[{key:"ngOnInit",value:function(){this.isUpdate=null!=this.data.jobId,this.jobStatuses=Object(s.e)(r.e),this.createForm(),this.getEmployees(),Object(s.b)(this.toastr)}},{key:"createForm",value:function(){this.jobForm=this.fb.group({employeeId:[this.data.employeeId,l.q.required],title:[this.data.title,l.q.required],description:[this.data.description]}),this.isUpdate&&(this.jobForm.addControl("status",new l.d(this.data.status,l.q.required)),this.jobForm.addControl("creationDate",new l.d(this.data.creationDate,l.q.required)),this.jobForm.addControl("startDate",new l.d(this.data.startDate)),this.jobForm.addControl("finishDate",new l.d(this.data.finishDate)))}},{key:"getEmployees",value:function(){var t=this;this.employeeService.all().pipe(Object(b.a)(this.destroy$)).subscribe((function(e){return t.employees=e}))}},{key:"onSubmit",value:function(){this.jobForm.valid?null==this.data.jobId?this.create():this.update():this.jobForm.markAllAsTouched()}},{key:"create",value:function(){var t=this;this.jobService.create(this.jobForm.value).pipe(Object(b.a)(this.destroy$)).subscribe((function(e){t.toastr.success(t.translate.instant("Created"),t.translate.instant("Success")),t.matDialogRef.close({action:r.a.Create,data:e.createdId})}),(function(e){t.toastr.error(t.translate.instant("Failed"),t.translate.instant("Error")),console.log(e)}))}},{key:"update",value:function(){var t=this;this.jobService.update(Object.assign({jobId:this.data.jobId},this.jobForm.value)).pipe(Object(b.a)(this.destroy$)).subscribe((function(){t.toastr.success(t.translate.instant("Updated"),t.translate.instant("Success")),t.matDialogRef.close({action:r.a.Update,data:t.data.jobId})}),(function(e){t.toastr.error(t.translate.instant("Failed"),t.translate.instant("Error")),console.log(e)}))}},{key:"resetForm",value:function(){this.createForm()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"showFullForm",get:function(){return this.isUpdate}}]),t}()).\u0275fac=function(t){return new(t||$)(d.Pb(l.c),d.Pb(m),d.Pb(p.a),d.Pb(u.a),d.Pb(u.e),d.Pb(C.b),d.Pb(j.e))},$.\u0275cmp=d.Jb({type:$,selectors:[["app-create-update-job"]],decls:38,vars:18,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],["appearance","standard"],["formControlName","employeeId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","placeholder","title","formControlName","title"],["matInput","","placeholder","Some description","formControlName","description","rows","3"],["class","row",4,"ngIf"],[1,"row","px-2","mt-4"],[1,"col-md-6"],["mat-raised-button","","type","submit","color","primary",1,"btn-block"],["mat-raised-button","","type","button",1,"btn-block",3,"click"],[3,"value"],[1,"row"],["formControlName","status"],["color","primary","appearance","standard"],["matInput","","formControlName","creationDate",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker1",""],["matInput","","formControlName","startDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","finishDate",3,"matDatepicker"],["picker3",""]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Cc(5,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"h3",4),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Qb(9,"hr"),d.Vb(10,"form",5),d.dc("ngSubmit",(function(){return e.onSubmit()})),d.Vb(11,"mat-form-field",6),d.Vb(12,"mat-label"),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Vb(15,"mat-select",7),d.Bc(16,S,2,2,"mat-option",8),d.Ub(),d.Bc(17,I,4,6,"mat-error",9),d.Ub(),d.Vb(18,"mat-form-field",6),d.Vb(19,"mat-label"),d.Cc(20),d.ic(21,"translate"),d.Ub(),d.Qb(22,"input",10),d.Bc(23,E,4,6,"mat-error",9),d.Ub(),d.Vb(24,"mat-form-field",6),d.Vb(25,"mat-label"),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Qb(28,"textarea",11),d.Ub(),d.Bc(29,J,37,21,"div",12),d.Vb(30,"div",13),d.Vb(31,"div",14),d.Vb(32,"button",15),d.Cc(33),d.Ub(),d.Ub(),d.Vb(34,"div",14),d.Vb(35,"button",16),d.dc("click",(function(){return e.resetForm()})),d.Vb(36,"mat-icon"),d.Cc(37,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(7),d.Dc(d.jc(8,10,"Job")),d.Cb(3),d.nc("formGroup",e.jobForm),d.Cb(3),d.Dc(d.jc(14,12,"Employee")),d.Cb(3),d.nc("ngForOf",e.employees),d.Cb(1),d.nc("ngIf",e.hasCustomError(e.jobForm,"employeeId")),d.Cb(3),d.Dc(d.jc(21,14,"Title")),d.Cb(3),d.nc("ngIf",e.hasCustomError(e.jobForm,"title")),d.Cb(3),d.Dc(d.jc(27,16,"Description")),d.Cb(3),d.nc("ngIf",e.showFullForm),d.Cb(4),d.Ec(" ",e.getButtonState()," "))},directives:[v.a,U.g,u.c,y.a,l.r,l.l,l.f,U.c,U.f,V.a,l.k,l.e,i.k,i.l,g.b,l.b,k.n,U.b,F.b,F.d,F.a],pipes:[j.d],styles:[""]}),$),N=a("jaxi"),x=a("nYR2"),B=a("kar1");function _(t,e){if(1&t&&(d.Vb(0,"li",6),d.Vb(1,"span",7),d.Vb(2,"mat-icon"),d.Cc(3,"person"),d.Ub(),d.Vb(4,"b"),d.Cc(5),d.ic(6,"translate"),d.Ub(),d.Ub(),d.Qb(7,"br"),d.Vb(8,"span",8),d.Cc(9),d.Ub(),d.Ub()),2&t){var a=d.hc(2);d.Cb(5),d.Ec("",d.jc(6,2,"Responsible"),": "),d.Cb(4),d.Ec(" ",a.employee.firstName+" "+a.employee.lastName," ")}}function Q(t,e){if(1&t){var a=d.Wb();d.Tb(0),d.Vb(1,"button",13),d.dc("click",(function(){return d.uc(a),d.hc(2).update()})),d.Cc(2),d.ic(3,"translate"),d.Ub(),d.Vb(4,"button",14),d.dc("click",(function(){return d.uc(a),d.hc(2).delete()})),d.Cc(5),d.ic(6,"translate"),d.Ub(),d.Sb()}2&t&&(d.Cb(2),d.Dc(d.jc(3,2,"Update")),d.Cb(3),d.Dc(d.jc(6,4,"Delete")))}function q(t,e){if(1&t){var a=d.Wb();d.Vb(0,"button",17),d.dc("click",(function(){return d.uc(a),d.hc(3).startJob()})),d.Vb(1,"mat-icon"),d.Cc(2,"play_arrow"),d.Ub(),d.Cc(3),d.ic(4,"translate"),d.Ub()}2&t&&(d.Cb(3),d.Ec(" ",d.jc(4,1,"Start")," "))}function G(t,e){if(1&t){var a=d.Wb();d.Vb(0,"button",17),d.dc("click",(function(){return d.uc(a),d.hc(3).finishJob()})),d.Vb(1,"mat-icon"),d.Cc(2,"check_circle"),d.Ub(),d.Cc(3),d.ic(4,"translate"),d.Ub()}2&t&&(d.Cb(3),d.Ec(" ",d.jc(4,1,"Finish")," "))}function A(t,e){1&t&&(d.Vb(0,"button",18),d.Vb(1,"mat-icon",19),d.Cc(2,"check"),d.Ub(),d.Cc(3),d.ic(4,"translate"),d.Ub()),2&t&&(d.Cb(3),d.Ec(" ",d.jc(4,1,"Finished")," "))}function T(t,e){if(1&t&&(d.Tb(0),d.Bc(1,q,5,3,"button",15),d.Bc(2,G,5,3,"button",15),d.Bc(3,A,5,3,"button",16),d.Sb()),2&t){var a=d.hc(2);d.Cb(1),d.nc("ngIf","Created"===a.job.status),d.Cb(1),d.nc("ngIf","InProgress"===a.job.status),d.Cb(1),d.nc("ngIf","Finished"===a.job.status)}}function M(t,e){if(1&t&&(d.Vb(0,"div",1),d.Vb(1,"div",2),d.Vb(2,"h4",3),d.Cc(3),d.Ub(),d.Ub(),d.Vb(4,"div",4),d.Vb(5,"ul",5),d.Vb(6,"li",6),d.Vb(7,"span",7),d.Vb(8,"mat-icon"),d.Cc(9,"description"),d.Ub(),d.Vb(10,"b"),d.Cc(11),d.ic(12,"translate"),d.Ub(),d.Ub(),d.Qb(13,"br"),d.Vb(14,"span",8),d.Cc(15),d.Ub(),d.Ub(),d.Bc(16,_,10,4,"li",9),d.Vb(17,"li",6),d.Vb(18,"span",7),d.Vb(19,"mat-icon"),d.Cc(20,"info"),d.Ub(),d.Vb(21,"b"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Ub(),d.Qb(24,"br"),d.Vb(25,"span",8),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Ub(),d.Vb(28,"li",6),d.Vb(29,"span",7),d.Vb(30,"mat-icon"),d.Cc(31,"perm_contact_calendar"),d.Ub(),d.Vb(32,"b"),d.Cc(33),d.ic(34,"translate"),d.Ub(),d.Ub(),d.Qb(35,"br"),d.Vb(36,"span",8),d.Cc(37),d.ic(38,"date"),d.Ub(),d.Ub(),d.Vb(39,"li",6),d.Vb(40,"span",7),d.Vb(41,"mat-icon"),d.Cc(42,"perm_contact_calendar"),d.Ub(),d.Vb(43,"b"),d.Cc(44),d.ic(45,"translate"),d.Ub(),d.Ub(),d.Qb(46,"br"),d.Vb(47,"span",8),d.Cc(48),d.ic(49,"date"),d.ic(50,"translate"),d.Ub(),d.Ub(),d.Vb(51,"li",6),d.Vb(52,"span",7),d.Vb(53,"mat-icon"),d.Cc(54,"perm_contact_calendar"),d.Ub(),d.Vb(55,"b"),d.Cc(56),d.ic(57,"translate"),d.Ub(),d.Ub(),d.Qb(58,"br"),d.Vb(59,"span",8),d.Cc(60),d.ic(61,"date"),d.ic(62,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(63,"div",10),d.Vb(64,"div",11),d.Bc(65,Q,7,6,"ng-container",12),d.Bc(66,T,4,3,"ng-container",12),d.Ub(),d.Ub(),d.Ub()),2&t){var a=d.hc();d.Cb(3),d.Ec(" ",a.job.title," "),d.Cb(8),d.Ec("",d.jc(12,14,"Description"),": "),d.Cb(4),d.Ec(" ",null!=a.job.description?a.job.description:"No description"," "),d.Cb(1),d.nc("ngIf",a.employee),d.Cb(6),d.Ec("",d.jc(23,16,"Status"),": "),d.Cb(4),d.Ec(" ",d.jc(27,18,a.jobStatus[a.job.status])," "),d.Cb(7),d.Ec("",d.jc(34,20,"Creation-date"),": "),d.Cb(4),d.Ec(" ",d.kc(38,22,a.job.creationDate,"medium")," "),d.Cb(7),d.Ec("",d.jc(45,25,"Start-date"),": "),d.Cb(4),d.Ec(" ",null!==a.job.startDate?d.kc(49,27,a.job.startDate,"medium"):d.jc(50,30,"Not-started")," "),d.Cb(8),d.Ec("",d.jc(57,32,"Finish-date"),": "),d.Cb(4),d.Ec(" ",null!==a.job.finishDate?d.kc(61,34,a.job.finishDate,"medium"):d.jc(62,37,"Not-finished")," "),d.Cb(5),d.nc("ngIf",a.isManager),d.Cb(1),d.nc("ngIf",a.canDoJob)}}var W,L=((W=function(){function t(e,a,c,i,n,b){_classCallCheck(this,t),this.jobService=e,this.employeeService=a,this.authService=c,this.toastr=i,this.dialog=n,this.translate=b,this.jobChanged=new d.o,this.jobStatus=r.e,this.canDoJob=!1,this.destroy$=new o.a}return _createClass(t,[{key:"ngOnInit",value:function(){this.initValues(),Object(s.b)(this.toastr)}},{key:"initValues",value:function(){this.canDoJob=this.job.employeeId===this.authService.getCurrentUser.id,this.getEmployee()}},{key:"getEmployee",value:function(){var t=this;this.employee&&this.job.employeeId===this.employee.id||this.employeeService.get(this.job.employeeId).pipe(Object(b.a)(this.destroy$)).subscribe((function(e){return t.employee=e}))}},{key:"refreshJob",value:function(){var t=this;this.jobService.get(this.job.jobId).pipe(Object(x.a)((function(){return t.getEmployee()})),Object(b.a)(this.destroy$)).subscribe((function(e){t.job=e,t.jobChanged.emit({data:t.job,action:r.a.Update})}))}},{key:"update",value:function(){var t=this;this.dialog.open(P,{width:"34%",autoFocus:!0,data:this.job}).afterClosed().pipe(Object(b.a)(this.destroy$)).subscribe((function(){return t.refreshJob()}))}},{key:"delete",value:function(){var t=this;Object(s.d)(this.translate.instant("Job")+": "+this.job.title,this.translate)&&this.jobService.delete(this.job.jobId).pipe(Object(b.a)(this.destroy$)).subscribe((function(){t.toastr.success(t.translate.instant("Deleted"),t.translate.instant("Success")),t.jobChanged.emit({data:t.job,action:r.a.Delete}),t.job=null}),(function(e){t.toastr.error(t.translate.instant("Failed"),t.translate.instant("Error")),console.log(e)}))}},{key:"startJob",value:function(){var t=this;this.jobService.startJob(this.job.jobId).pipe(Object(b.a)(this.destroy$)).subscribe((function(){t.toastr.success(t.translate.instant("Started"),t.translate.instant("Success")),t.refreshJob()}),(function(e){t.toastr.error(t.translate.instant("Failed"),t.translate.instant("Error")),console.log(e)}))}},{key:"finishJob",value:function(){var t=this;this.jobService.finishJob(this.job.jobId).pipe(Object(b.a)(this.destroy$)).subscribe((function(){t.toastr.success(t.translate.instant("Finished"),t.translate.instant("Success")),t.refreshJob()}),(function(e){t.toastr.error(t.translate.instant("Failed"),t.translate.instant("Error")),console.log(e)}))}},{key:"ngOnChanges",value:function(){this.initValues()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"isManager",get:function(){return this.authService.isManager}}]),t}()).\u0275fac=function(t){return new(t||W)(d.Pb(m),d.Pb(p.a),d.Pb(B.a),d.Pb(C.b),d.Pb(u.b),d.Pb(j.e))},W.\u0275cmp=d.Jb({type:W,selectors:[["app-job-info"]],inputs:{job:"job"},outputs:{jobChanged:"jobChanged"},features:[d.Ab],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"text-center"],[1,"card-body","my-auto"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"d-inline-flex"],[1,"ml-1"],["class","list-group-item",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-content-center"],[4,"ngIf"],[1,"btn","btn-warning","mx-1",3,"click"],[1,"btn","btn-danger","mx-1",3,"click"],["mat-raised-button","","class","w-50","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","disabled","","class","w-50",4,"ngIf"],["mat-raised-button","","color","primary",1,"w-50",3,"click"],["mat-raised-button","","disabled","",1,"w-50"],[1,"mr-1"]],template:function(t,e){1&t&&d.Bc(0,M,67,39,"div",0),2&t&&d.nc("ngIf",e.job)},directives:[i.l,y.a,v.a],pipes:[j.d,i.e],styles:[""]}),W);function R(t,e){if(1&t&&(d.Vb(0,"mat-option",8),d.Cc(1),d.Ub()),2&t){var a=e.$implicit;d.nc("value",a.id),d.Cb(1),d.Ec(" ",a.firstName+" "+a.lastName," ")}}function X(t,e){if(1&t&&(d.Vb(0,"mat-option",8),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&t){var a=e.$implicit;d.nc("value",a.value),d.Cb(1),d.Ec(" ",d.jc(2,2,a.title)," ")}}function K(t,e){if(1&t){var a=d.Wb();d.Vb(0,"tr",17),d.Vb(1,"td",25),d.Cc(2),d.Ub(),d.Vb(3,"td",10),d.Cc(4),d.ic(5,"date"),d.Ub(),d.Vb(6,"td",12),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Vb(9,"td",25),d.Vb(10,"button",26),d.dc("click",(function(){d.uc(a);var t=e.$implicit;return d.hc().selectJob(t)})),d.Vb(11,"mat-icon",27),d.Cc(12,"info"),d.Ub(),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Ub(),d.Ub()}if(2&t){var c=e.$implicit,i=d.hc();d.Cb(2),d.Ec(" ",c.title," "),d.Cb(2),d.Ec(" ",d.kc(5,6,c.creationDate,"medium")," "),d.Cb(3),d.Ec(" ",d.jc(8,9,i.jobStatus[c.status])," "),d.Cb(3),d.Gb("disabled",i.jobSelected&&i.jobSelected.jobId===c.jobId),d.Cb(3),d.Ec(" ",d.jc(14,11,"Info")," ")}}function Y(t,e){1&t&&(d.Vb(0,"tr"),d.Vb(1,"td"),d.Vb(2,"p"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(3),d.Dc(d.jc(4,1,"Empty")))}function H(t,e){if(1&t){var a=d.Wb();d.Vb(0,"div",10),d.Vb(1,"div",2),d.Vb(2,"h3"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Qb(5,"hr"),d.Vb(6,"app-job-info",28),d.dc("jobChanged",(function(t){return d.uc(a),d.hc().jobChanged(t)})),d.Ub(),d.Ub()}if(2&t){var c=d.hc();d.Cb(3),d.Dc(d.jc(4,2,"Info")),d.Cb(3),d.nc("job",c.jobSelected)}}var Z,z=((Z=function(){function t(e,a,c,i,n,b,s){_classCallCheck(this,t),this.fb=e,this.route=a,this.jobService=c,this.employeeService=i,this.toastr=n,this.dialog=b,this.translate=s,this.employeeId=null,this.jobs=[],this.jobsFiltered=[],this.jobSelected=null,this.employees=[],this.jobStatus=r.e,this.destroy$=new o.a}return _createClass(t,[{key:"ngOnInit",value:function(){this.route.snapshot.params.employeeId&&(this.employeeId=this.route.snapshot.params.employeeId),this.jobStatuses=Object(s.e)(r.e),this.createForm(),this.getJobs(),this.getEmployees(),Object(s.b)(this.toastr)}},{key:"createForm",value:function(){var t;this.filterForm=this.fb.group({employeeId:null!==(t=this.employeeId)&&void 0!==t?t:"*",status:"*"})}},{key:"getJobs",value:function(){this.employeeId?this.getJobsForEmployee(this.employeeId):this.getAllJobs()}},{key:"getAllJobs",value:function(){var t=this;this.jobService.all().pipe(Object(b.a)(this.destroy$)).subscribe((function(e){t.jobs=e,t.jobsFiltered=t.jobs}))}},{key:"getJobsForEmployee",value:function(t){var e=this;this.jobService.getForEmployee(t).pipe(Object(b.a)(this.destroy$)).subscribe((function(t){e.jobs=t,e.jobsFiltered=e.jobs}))}},{key:"getEmployees",value:function(){var t=this;this.employeeService.all().pipe(Object(b.a)(this.destroy$)).subscribe((function(e){return t.employees=e}))}},{key:"selectEmployee",value:function(t){this.employeeId="*"===t?null:t,this.getJobs()}},{key:"selectStatus",value:function(t){this.jobsFiltered="*"!==t?this.jobs.filter((function(e){return e.status===t})):this.jobs}},{key:"selectJob",value:function(t){this.jobSelected=t}},{key:"create",value:function(){var t=this,e=this.getDefaultFob();this.dialog.open(P,{width:"30%",autoFocus:!0,data:e}).afterClosed().pipe(Object(b.a)(this.destroy$)).subscribe((function(e){e&&t.refreshData(e)}))}},{key:"jobChanged",value:function(t){Object(s.i)(t.action,this.jobs,t.data,(function(e){return e.jobId===t.data.jobId}))}},{key:"resetForm",value:function(){this.createForm(),this.jobsFiltered=this.jobs,this.jobSelected=null}},{key:"refreshData",value:function(t){var e=this,a=t.data,c=t.action;this.jobService.get(a).pipe(Object(b.a)(this.destroy$)).subscribe((function(t){Object(s.i)(c,e.jobs,t,(function(t){return t.jobId===a})),e.jobSelected&&e.jobSelected.jobId===a&&(e.jobSelected=t)}))}},{key:"getDefaultFob",value:function(){return{employeeId:this.employeeId,jobId:null,title:null,description:null,status:null,startDate:null,creationDate:null,finishDate:null}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}()).\u0275fac=function(t){return new(t||Z)(d.Pb(l.c),d.Pb(n.a),d.Pb(m),d.Pb(p.a),d.Pb(C.b),d.Pb(u.b),d.Pb(j.e))},Z.\u0275cmp=d.Jb({type:Z,selectors:[["app-job-list"]],decls:56,vars:35,consts:[[1,"row","pl-1"],[1,"col-md-8"],[1,"text-center","my-2"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-5"],["appearance","standard"],["formControlName","employeeId",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["formControlName","status",3,"selectionChange"],[1,"col-md-2"],[1,"my-auto"],[3,"click"],[1,"table","table-bordered","text-center","mt-2"],[1,"thead-light"],[1,"d-flex"],["scope","col",1,"col-md-3"],["scope","col",1,"col-md-4"],["scope","col",1,"col-md-2"],["mat-raised-button","","color","primary",1,"btn","btn-sm","w-75",3,"click"],["class","d-flex",4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"col-md-3"],[1,"btn","btn-info","w-75","d-inline-flex","justify-content-center",3,"click"],[1,"mr-1"],[3,"job","jobChanged"]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"h3"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Ub(),d.Qb(6,"hr"),d.Vb(7,"form",3),d.Vb(8,"div",4),d.Vb(9,"div",5),d.Vb(10,"mat-form-field",6),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Vb(14,"mat-select",7),d.dc("selectionChange",(function(t){return e.selectEmployee(t.value)})),d.Vb(15,"mat-option",8),d.Cc(16),d.ic(17,"translate"),d.Ub(),d.Bc(18,R,2,2,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",10),d.Vb(20,"mat-form-field",6),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Vb(24,"mat-select",11),d.dc("selectionChange",(function(t){return e.selectStatus(t.value)})),d.Vb(25,"mat-option",8),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Bc(28,X,3,4,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(29,"div",12),d.Vb(30,"mat-button-toggle-group",13),d.Vb(31,"mat-button-toggle",14),d.dc("click",(function(){return e.resetForm()})),d.Vb(32,"mat-icon"),d.Cc(33,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(34,"table",15),d.Vb(35,"thead",16),d.Vb(36,"tr",17),d.Vb(37,"th",18),d.Cc(38),d.ic(39,"translate"),d.Ub(),d.Vb(40,"th",19),d.Cc(41),d.ic(42,"translate"),d.Ub(),d.Vb(43,"th",20),d.Cc(44),d.ic(45,"translate"),d.Ub(),d.Vb(46,"th",18),d.Vb(47,"button",21),d.dc("click",(function(){return e.create()})),d.Vb(48,"mat-icon"),d.Cc(49,"add"),d.Ub(),d.Cc(50),d.ic(51,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(52,"tbody"),d.Bc(53,K,15,13,"tr",22),d.Bc(54,Y,5,3,"tr",23),d.Ub(),d.Ub(),d.Ub(),d.Bc(55,H,7,4,"div",24),d.Ub()),2&t&&(d.Cb(4),d.Dc(d.jc(5,17,"Job-management")),d.Cb(3),d.nc("formGroup",e.filterForm),d.Cb(5),d.Dc(d.jc(13,19,"Employee")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(17,21,"All")," "),d.Cb(2),d.nc("ngForOf",e.employees),d.Cb(4),d.Dc(d.jc(23,23,"Status")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(27,25,"All")," "),d.Cb(2),d.nc("ngForOf",e.jobStatuses),d.Cb(10),d.Ec(" ",d.jc(39,27,"Title")," "),d.Cb(3),d.Ec(" ",d.jc(42,29,"Creation-date")," "),d.Cb(3),d.Ec(" ",d.jc(45,31,"Status")," "),d.Cb(6),d.Ec(" ",d.jc(51,33,"Create")," "),d.Cb(3),d.nc("ngForOf",e.jobsFiltered),d.Cb(1),d.nc("ngIf",0===e.jobsFiltered.length),d.Cb(1),d.nc("ngIf",e.jobSelected))},directives:[l.r,l.l,l.f,U.c,U.f,V.a,l.k,l.e,k.n,i.k,N.b,N.a,y.a,v.a,i.l,L],pipes:[j.d,i.e],styles:[""]}),Z);function tt(t,e){if(1&t&&(d.Vb(0,"mat-option",8),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&t){var a=e.$implicit;d.nc("value",a.value),d.Cb(1),d.Ec(" ",d.jc(2,2,a.title)," ")}}function et(t,e){if(1&t){var a=d.Wb();d.Vb(0,"tr",14),d.Vb(1,"td",5),d.Cc(2),d.Ub(),d.Vb(3,"td",21),d.Cc(4),d.ic(5,"date"),d.Ub(),d.Vb(6,"td",22),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Vb(9,"td",5),d.Vb(10,"button",23),d.dc("click",(function(){d.uc(a);var t=e.$implicit;return d.hc().selectJob(t)})),d.Vb(11,"mat-icon",24),d.Cc(12,"info"),d.Ub(),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Ub(),d.Ub()}if(2&t){var c=e.$implicit,i=d.hc();d.Cb(2),d.Ec(" ",c.title," "),d.Cb(2),d.Ec(" ",d.kc(5,6,c.creationDate,"medium")," "),d.Cb(3),d.Ec(" ",d.jc(8,9,i.jobStatus[c.status])," "),d.Cb(3),d.Gb("disabled",i.jobSelected&&i.jobSelected.jobId===c.jobId),d.Cb(3),d.Ec(" ",d.jc(14,11,"Info")," ")}}function at(t,e){1&t&&(d.Vb(0,"tr"),d.Vb(1,"td"),d.Vb(2,"p"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Ub()),2&t&&(d.Cb(3),d.Dc(d.jc(4,1,"Empty")))}function ct(t,e){if(1&t){var a=d.Wb();d.Vb(0,"div",21),d.Vb(1,"div",2),d.Vb(2,"h3"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Qb(5,"hr"),d.Vb(6,"app-job-info",25),d.dc("jobChanged",(function(t){return d.uc(a),d.hc().jobChanged(t)})),d.Ub(),d.Ub()}if(2&t){var c=d.hc();d.Cb(3),d.Dc(d.jc(4,2,"Info")),d.Cb(3),d.nc("job",c.jobSelected)}}var it,nt,ot,bt=((it=function(){function t(e,a,c,i,n){_classCallCheck(this,t),this.fb=e,this.jobService=a,this.authService=c,this.toastr=i,this.translate=n,this.jobStatus=r.e,this.jobs=[],this.jobsFiltered=[],this.jobSelected=null,this.currentUser=null,this.destroy$=new o.a}return _createClass(t,[{key:"ngOnInit",value:function(){this.currentUser=this.authService.getCurrentUser,this.jobStatuses=Object(s.e)(r.e),this.createForm(),this.getJobs(),Object(s.b)(this.toastr)}},{key:"createForm",value:function(){this.filterForm=this.fb.group({status:"*"})}},{key:"getJobs",value:function(){var t=this;this.jobService.getForEmployee(this.currentUser.id).pipe(Object(b.a)(this.destroy$)).subscribe((function(e){t.jobs=e,t.jobsFiltered=t.jobs}))}},{key:"selectStatus",value:function(t){this.jobsFiltered="*"!==t?this.jobs.filter((function(e){return e.status===t})):this.jobs}},{key:"selectJob",value:function(t){this.jobSelected=t}},{key:"jobChanged",value:function(t){Object(s.i)(t.action,this.jobs,t.data,(function(e){return e.jobId===t.data.jobId}))}},{key:"resetForm",value:function(){this.createForm(),this.jobsFiltered=this.jobs,this.jobSelected=null}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),t}()).\u0275fac=function(t){return new(t||it)(d.Pb(l.c),d.Pb(m),d.Pb(B.a),d.Pb(C.b),d.Pb(j.e))},it.\u0275cmp=d.Jb({type:it,selectors:[["app-personal-jobs"]],decls:43,vars:27,consts:[[1,"row","pl-1"],[1,"col-md-8"],[1,"text-center","my-2"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-3"],["appearance","standard"],["formControlName","status",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"my-auto"],[3,"click"],[1,"table","table-bordered","text-center","mt-2"],[1,"thead-light"],[1,"d-flex"],["scope","col",1,"col-md-3"],["scope","col",1,"col-md-4"],["scope","col",1,"col-md-2"],["class","d-flex",4,"ngFor","ngForOf"],[4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"col-md-4"],[1,"col-md-2"],[1,"btn","btn-info","w-75","d-inline-flex","justify-content-center",3,"click"],[1,"mr-1"],[3,"job","jobChanged"]],template:function(t,e){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"h3"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Ub(),d.Qb(6,"hr"),d.Vb(7,"form",3),d.Vb(8,"div",4),d.Vb(9,"div",5),d.Vb(10,"mat-form-field",6),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Vb(14,"mat-select",7),d.dc("selectionChange",(function(t){return e.selectStatus(t.value)})),d.Vb(15,"mat-option",8),d.Cc(16),d.ic(17,"translate"),d.Ub(),d.Bc(18,tt,3,4,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",5),d.Vb(20,"mat-button-toggle-group",10),d.Vb(21,"mat-button-toggle",11),d.dc("click",(function(){return e.resetForm()})),d.Vb(22,"mat-icon"),d.Cc(23,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(24,"table",12),d.Vb(25,"thead",13),d.Vb(26,"tr",14),d.Vb(27,"th",15),d.Cc(28),d.ic(29,"translate"),d.Ub(),d.Vb(30,"th",16),d.Cc(31),d.ic(32,"translate"),d.Ub(),d.Vb(33,"th",17),d.Cc(34),d.ic(35,"translate"),d.Ub(),d.Vb(36,"th",15),d.Cc(37),d.ic(38,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Vb(39,"tbody"),d.Bc(40,et,15,13,"tr",18),d.Bc(41,at,5,3,"tr",19),d.Ub(),d.Ub(),d.Ub(),d.Bc(42,ct,7,4,"div",20),d.Ub()),2&t&&(d.Cb(4),d.Dc(d.jc(5,13,"My-jobs")),d.Cb(3),d.nc("formGroup",e.filterForm),d.Cb(5),d.Dc(d.jc(13,15,"Status")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(17,17,"All")," "),d.Cb(2),d.nc("ngForOf",e.jobStatuses),d.Cb(10),d.Ec(" ",d.jc(29,19,"Title")," "),d.Cb(3),d.Ec(" ",d.jc(32,21,"Creation-date")," "),d.Cb(3),d.Ec(" ",d.jc(35,23,"Status")," "),d.Cb(3),d.Ec(" ",d.jc(38,25,"Details")," "),d.Cb(3),d.nc("ngForOf",e.jobsFiltered),d.Cb(1),d.nc("ngIf",0===e.jobsFiltered.length),d.Cb(1),d.nc("ngIf",e.jobSelected))},directives:[l.r,l.l,l.f,U.c,U.f,V.a,l.k,l.e,k.n,i.k,N.b,N.a,y.a,i.l,L],pipes:[j.d,i.e],styles:[""]}),it),st=a("4Q6e"),rt=[{path:"",redirectTo:"job-list",pathMatch:"full",canLoad:[st.a],canActivate:[st.a]},{path:"job-list/:employeeId",component:z,canLoad:[st.a],canActivate:[st.a]},{path:"job-list",component:z,canLoad:[st.a],canActivate:[st.a]},{path:"personal-jobs",component:bt}],lt=((nt=function t(){_classCallCheck(this,t)}).\u0275mod=d.Nb({type:nt}),nt.\u0275inj=d.Mb({factory:function(t){return new(t||nt)},imports:[[n.e.forChild(rt)],n.e]}),nt),ut=a("PCNd"),dt=((ot=function t(){_classCallCheck(this,t)}).\u0275mod=d.Nb({type:ot}),ot.\u0275inj=d.Mb({factory:function(t){return new(t||ot)},imports:[[i.c,lt,ut.a]]}),ot)}}]);