(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Iab2:function(t,e,r){var n,o;void 0===(o="function"==typeof(n=function(){"use strict";function e(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){a(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(r)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,a,c){var i=o.URL||o.webkitURL,s=document.createElement("a");s.download=a=a||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?n(s):r(s.href)?e(t,a,c):n(s,s.target="_blank")):(s.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(s.href)}),4e4),setTimeout((function(){n(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,a){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),o);else if(r(t))e(t,o,a);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){n(c)}))}}:function(t,r,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return e(t,r,n);var c="application/octet-stream"===t.type,i=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||c&&i)&&"object"==typeof FileReader){var b=new FileReader;b.onloadend=function(){var t=b.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},b.readAsDataURL(t)}else{var l=o.URL||o.webkitURL,u=l.createObjectURL(t);a?a.location=u:location.href=u,a=null,setTimeout((function(){l.revokeObjectURL(u)}),4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?n.apply(e,[]):n)||(t.exports=o)},xDfr:function(t,e,r){"use strict";r.r(e),r.d(e,"AdminModule",(function(){return V}));var n=r("ofXK"),o=r("PCNd"),a=r("tyNb"),c=r("3Pt+"),i=r("XNiG"),s=r("1G5W"),b=r("Ojd6"),l=r("fXoL"),u=r("Iab2"),d=r("NgpD"),m=r("tk/3");let p=(()=>{class t{constructor(t){this.httpClient=t}query(t){return this.httpClient.post(d.a.adminQuery,t)}command(t){return this.httpClient.post(d.a.adminCommand,t)}craeteBackup(){return this.httpClient.post(d.a.createBackup,null)}getBackup(){this.httpClient.get(d.a.getBackup,{responseType:"blob"}).subscribe(t=>{Object(u.saveAs)(t,`backup${(new Date).toDateString()}.bak`)},t=>console.log(t))}}return t.\u0275fac=function(e){return new(e||t)(l.Zb(m.b))},t.\u0275prov=l.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=r("5eHb"),h=r("sYmb"),y=r("Wp6s"),v=r("QibW"),g=r("kmnG"),w=r("qFsG"),C=r("bTqV"),k=r("NFeN");function U(t,e){1&t&&(l.Vb(0,"mat-error"),l.Cc(1),l.ic(2,"translate"),l.ic(3,"translate"),l.Ub()),2&t&&(l.Cb(1),l.Fc(" ",l.jc(2,2,"Sql")," ",l.jc(3,4,"is-required")," "))}const j=[{path:"",redirectTo:"admin-page",pathMatch:"full"},{path:"admin-page",component:(()=>{class t{constructor(t,e,r,n){this.fb=t,this.adminService=e,this.toastr=r,this.translate=n,this.queryResult=null,this.commandResult=null,this.destroy$=new i.a,this.hasCustomError=(t,e)=>Object(b.g)(t,e)}ngOnInit(){this.createForm(),Object(b.b)(this.toastr)}createForm(){this.dbForm=this.fb.group({sqlQuery:[null,c.q.required],queryType:["query",c.q.required]})}onSubmit(){this.dbForm.valid?"query"===this.dbForm.value.queryType?this.executeQuery({sqlQuery:this.dbForm.value.sqlQuery}):this.executeCommand({sqlQuery:this.dbForm.value.sqlQuery}):this.dbForm.markAllAsTouched()}executeQuery(t){this.adminService.query(t).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{this.commandResult=null,this.queryResult=JSON.stringify(t)},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}executeCommand(t){this.adminService.command(t).pipe(Object(s.a)(this.destroy$)).subscribe(t=>{this.queryResult=null,this.commandResult=t.result>0?"Complete":"No-rows-have-changed"},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}createBackup(){this.adminService.craeteBackup().pipe(Object(s.a)(this.destroy$)).subscribe(()=>this.toastr.success(this.translate.instant("Complete"),this.translate.instant("Success")),t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}getBackup(){this.adminService.getBackup()}resetForm(){this.createForm()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(c.c),l.Pb(p),l.Pb(f.b),l.Pb(h.e))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-admin-page"]],decls:52,vars:33,consts:[[1,"text-center","mt-2","mb-3"],[1,"row"],[1,"col-md-7"],[1,"card-spacer"],[1,"d-flex","justify-content-center"],[1,"text-size-md","border-bottom"],["novalidate","",1,"mt-3",3,"formGroup","ngSubmit"],["formControlName","queryType"],["value","query",1,"mr-5"],["value","command"],["appearance","standard"],["matInput","","formControlName","sqlQuery","rows","3"],[4,"ngIf"],[1,"row","px-2","mt-3"],[1,"col-md-6"],["mat-raised-button","","color","primary","type","submit",1,"w-100"],["mat-raised-button","","type","button",1,"btn-block",3,"click"],["rows","8","readonly","",1,"form-control"],[1,"col-md-5"],["mat-raised-button","","color","primary","type","button",1,"w-100","mb-3",3,"click"],["mat-raised-button","","color","primary","type","button",1,"w-100",3,"click"]],template:function(t,e){1&t&&(l.Vb(0,"div",0),l.Vb(1,"h3"),l.Cc(2),l.ic(3,"translate"),l.Ub(),l.Ub(),l.Qb(4,"hr"),l.Vb(5,"div",1),l.Vb(6,"div",2),l.Vb(7,"mat-card",3),l.Vb(8,"mat-card-header",4),l.Vb(9,"mat-card-title",5),l.Cc(10),l.ic(11,"translate"),l.Ub(),l.Ub(),l.Vb(12,"mat-card-content"),l.Vb(13,"form",6),l.dc("ngSubmit",(function(){return e.onSubmit()})),l.Vb(14,"mat-radio-group",7),l.Vb(15,"mat-radio-button",8),l.Cc(16),l.ic(17,"translate"),l.Ub(),l.Vb(18,"mat-radio-button",9),l.Cc(19),l.ic(20,"translate"),l.Ub(),l.Ub(),l.Vb(21,"mat-form-field",10),l.Vb(22,"mat-label"),l.Cc(23),l.ic(24,"translate"),l.Ub(),l.Qb(25,"textarea",11),l.Bc(26,U,4,6,"mat-error",12),l.Ub(),l.Vb(27,"div",13),l.Vb(28,"div",14),l.Vb(29,"button",15),l.Cc(30),l.ic(31,"translate"),l.Ub(),l.Ub(),l.Vb(32,"div",14),l.Vb(33,"button",16),l.dc("click",(function(){return e.resetForm()})),l.Vb(34,"mat-icon"),l.Cc(35,"cached"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Vb(36,"textarea",17),l.Cc(37),l.ic(38,"translate"),l.Ub(),l.Ub(),l.Ub(),l.Vb(39,"div",18),l.Vb(40,"mat-card",3),l.Vb(41,"mat-card-header",4),l.Vb(42,"mat-card-title",5),l.Cc(43),l.ic(44,"translate"),l.Ub(),l.Ub(),l.Vb(45,"mat-card-content"),l.Vb(46,"button",19),l.dc("click",(function(){return e.createBackup()})),l.Cc(47),l.ic(48,"translate"),l.Ub(),l.Vb(49,"button",20),l.dc("click",(function(){return e.getBackup()})),l.Cc(50),l.ic(51,"translate"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&t&&(l.Cb(2),l.Dc(l.jc(3,13,"Admin-panel")),l.Cb(8),l.Dc(l.jc(11,15,"Db-query")),l.Cb(3),l.nc("formGroup",e.dbForm),l.Cb(3),l.Dc(l.jc(17,17,"Query")),l.Cb(3),l.Dc(l.jc(20,19,"Command")),l.Cb(4),l.Dc(l.jc(24,21,"Sql")),l.Cb(3),l.nc("ngIf",e.hasCustomError(e.dbForm,"sqlQuery")),l.Cb(4),l.Ec(" ",l.jc(31,23,"Run")," "),l.Cb(7),l.Fc("",e.queryResult,"",l.jc(38,25,e.commandResult),""),l.Cb(6),l.Dc(l.jc(44,27,"Db-backup")),l.Cb(4),l.Ec(" ",l.jc(48,29,"create-backup")," "),l.Cb(3),l.Ec(" ",l.jc(51,31,"get-backup")," "))},directives:[y.a,y.d,y.f,y.c,c.r,c.l,c.f,v.b,c.k,c.e,v.a,g.c,g.f,w.b,c.b,n.l,C.a,k.a,g.b],pipes:[h.d],styles:["span[_ngcontent-%COMP%]{font-size:15px}.card-spacer[_ngcontent-%COMP%]{padding:7% 10%}textarea[_ngcontent-%COMP%]{background-color:#fff!important;background:#fff!important}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(j)],a.e]}),t})(),V=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},imports:[[n.c,q,o.a]]}),t})()}}]);