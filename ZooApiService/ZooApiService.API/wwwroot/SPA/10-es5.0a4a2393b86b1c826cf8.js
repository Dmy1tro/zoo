function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{imCA:function(e,t,i){"use strict";i.r(t),i.d(t,"EmployeeModule",(function(){return be}));var r=i("ofXK"),a=i("tyNb"),o=i("XNiG"),c=i("1G5W"),n=i("Ojd6"),s=i("wFOr"),l=i("3Pt+"),b=i("0IaG"),d=i("fXoL"),m=i("kar1"),u=i("483E"),p=i("5eHb"),f=i("sYmb"),h=i("bTqV"),C=i("kmnG"),y=i("NFeN"),v=i("qFsG"),U=i("iadO"),V=i("d3UM"),g=i("FKr1");function w(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"First-name")," ",d.jc(3,4,"is-required")," "))}function k(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Last-name")," ",d.jc(3,4,"is-required")," "))}function j(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Email")," ",d.jc(3,4,"is-required")," "))}function F(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Date-of-birth")," ",d.jc(3,4,"is-required")," "))}function P(e,t){if(1&e&&(d.Vb(0,"mat-option",27),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&e){var i=t.$implicit;d.nc("value",i.value),d.Cb(1),d.Ec(" ",d.jc(2,2,i.title)," ")}}function E(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Gender")," ",d.jc(3,4,"is-required")," "))}function S(e,t){if(1&e&&(d.Vb(0,"mat-option",27),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&e){var i=t.$implicit;d.nc("value",i.value),d.Cb(1),d.Ec(" ",d.jc(2,2,i.title)," ")}}function D(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Job-pos")," ",d.jc(3,4,"is-required")," "))}function O(e,t){if(1&e&&(d.Vb(0,"mat-option",27),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&e){var i=t.$implicit;d.nc("value",i.value),d.Cb(1),d.Ec(" ",d.jc(2,2,i.title)," ")}}function N(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Role")," ",d.jc(3,4,"is-required")," "))}function x(e,t){if(1&e){var i=d.Wb();d.Vb(0,"div",6),d.Vb(1,"div",7),d.Vb(2,"mat-form-field",8),d.Vb(3,"mat-label"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Vb(6,"input",28),d.dc("input",(function(e){return d.uc(i),d.hc().checkPasswordsMatch(e.value)})),d.Ub(),d.Vb(7,"button",29),d.dc("click",(function(){d.uc(i);var e=d.hc();return e.hide=!e.hide})),d.Vb(8,"mat-icon"),d.Cc(9),d.Ub(),d.Ub(),d.Vb(10,"mat-error"),d.Cc(11),d.ic(12,"translate"),d.ic(13,"translate"),d.ic(14,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Vb(15,"div",7),d.Vb(16,"mat-form-field",8),d.Vb(17,"mat-label"),d.Cc(18),d.ic(19,"translate"),d.Ub(),d.Vb(20,"input",30),d.dc("input",(function(e){return d.uc(i),d.hc().checkPasswordsMatch(e.value)})),d.Ub(),d.Vb(21,"button",29),d.dc("click",(function(){d.uc(i);var e=d.hc();return e.hideConfirm=!e.hideConfirm})),d.Vb(22,"mat-icon"),d.Cc(23),d.Ub(),d.Ub(),d.Vb(24,"mat-error"),d.Cc(25),d.ic(26,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var r=d.hc();d.Cb(4),d.Dc(d.jc(5,14,"Password")),d.Cb(2),d.nc("type",r.hide?"password":"text"),d.Cb(1),d.Db("aria-label","Hide password")("aria-pressed",r.hide),d.Cb(2),d.Dc(r.hide?"visibility_off":"visibility"),d.Cb(2),d.Gc(" ",d.jc(12,16,"Password")," ",d.jc(13,18,"is-required"),". ",d.jc(14,20,"min-6")," "),d.Cb(7),d.Dc(d.jc(19,22,"Confirm-password")),d.Cb(2),d.nc("type",r.hideConfirm?"password":"text"),d.Cb(1),d.Db("aria-label","Hide password")("aria-pressed",r.hideConfirm),d.Cb(2),d.Dc(r.hideConfirm?"visibility_off":"visibility"),d.Cb(2),d.Ec(" ",d.jc(26,24,"Pass-not-match")," ")}}function I(e,t){1&e&&(d.Vb(0,"p",31),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Ec(" ",d.jc(2,1,"Not-allowed")," "))}var q,$=((q=function(){function e(t,i,r,a,c,s,l){var b=this;_classCallCheck(this,e),this.fb=t,this.accountService=i,this.employeeService=r,this.data=a,this.matDialogRef=c,this.toastr=s,this.translate=l,this.hide=!0,this.hideConfirm=!0,this.passError=null,this.havePermission=!1,this.isUpdate=!1,this.destroy$=new o.a,this.getButtonState=function(){return b.translate.instant(Object(n.f)(b.isUpdate,"Employee"))},this.hasCustomError=function(e,t){return Object(n.g)(e,t)}}return _createClass(e,[{key:"ngOnInit",value:function(){this.isUpdate=null!=this.data.id,this.havePermission=!this.data.role||this.data.role.toUpperCase()!=="Admin".toUpperCase()||this.accountService.isAdmin,this.genders=Object(n.e)(s.c),this.jobs=Object(n.e)(s.d),this.getAllowedRoles(),this.createForm(),Object(n.b)(this.toastr)}},{key:"getAllowedRoles",value:function(){if(this.roles=Object(n.e)(s.f),!this.accountService.isAdmin&&this.havePermission){var e=this.roles.findIndex((function(e){return"Admin"===e.title}));this.roles.splice(e,1)}}},{key:"createForm",value:function(){this.employeeForm=this.fb.group({id:[this.data.id],firstName:[this.data.firstName,l.q.required],lastName:[this.data.lastName,l.q.required],email:[this.data.email,[l.q.required,l.q.email]],dateOfBirth:[this.data.dateOfBirth,l.q.required],gender:[this.data.gender,l.q.required],position:[this.data.position,l.q.required],role:[this.data.role,l.q.required]}),this.isUpdate||(this.employeeForm.addControl("password",new l.d(null,[l.q.required,l.q.minLength(6)])),this.employeeForm.addControl("confirmPassword",new l.d(null,l.q.required)))}},{key:"onSubmit",value:function(){this.employeeForm.valid?this.isUpdate?this.update():this.create():this.employeeForm.markAllAsTouched()}},{key:"create",value:function(){var e=this;this.checkPasswordsMatch(null)&&(this.employeeForm.removeControl("confirmPassword"),this.accountService.create(this.employeeForm.value).pipe(Object(c.a)(this.destroy$)).subscribe((function(t){e.toastr.success(e.translate.instant("Created"),e.translate.instant("Success")),e.matDialogRef.close({action:s.a.Create,data:t.createdId})}),(function(t){e.toastr.error(e.translate.instant("Failed"),e.translate.instant("Error")),console.log(t)})))}},{key:"update",value:function(){var e=this;this.employeeService.update(this.employeeForm.value).pipe(Object(c.a)(this.destroy$)).subscribe((function(){e.toastr.success(e.translate.instant("Updated"),e.translate.instant("Success")),e.matDialogRef.close({action:s.a.Update,data:e.data.id})}),(function(t){e.toastr.error(e.translate.instant("Failed"),e.translate.instant("Error")),console.log(t)}))}},{key:"checkPasswordsMatch",value:function(e){var t=this.employeeForm.value;return t.password&&t.confirmPassword?t.password!==t.confirmPassword?(this.employeeForm.get("confirmPassword").setErrors({error:"Password does not match with confirm password"}),this.passError="Password does not match with confirm password",!1):(this.passError=null,!0):(this.passError=null,!1)}},{key:"resetForm",value:function(){this.createForm(),this.passError=null}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"showPasswordForm",get:function(){return!this.isUpdate}}]),e}()).\u0275fac=function(e){return new(e||q)(d.Pb(l.c),d.Pb(m.a),d.Pb(u.a),d.Pb(b.a),d.Pb(b.e),d.Pb(p.b),d.Pb(f.e))},q.\u0275cmp=d.Jb({type:q,selectors:[["app-create-update-employee"]],decls:78,vars:42,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],["appearance","standard"],["matInput","","formControlName","firstName"],[4,"ngIf"],["matInput","","formControlName","lastName"],["matInput","","formControlName","email","type","email"],["color","primary","appearance","standard"],["matInput","","formControlName","dateOfBirth","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker1",""],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["formControlName","position"],["formControlName","role"],["class","row",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"row","px-2","mt-4"],["mat-raised-button","","type","submit","color","primary",1,"btn-block",3,"disabled"],["mat-raised-button","","type","button",1,"btn-block",3,"disabled","click"],[3,"value"],["matInput","","formControlName","password",3,"type","input"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword",3,"type","input"],[1,"text-danger"]],template:function(e,t){if(1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Cc(5,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"h3",4),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Qb(9,"hr"),d.Vb(10,"form",5),d.dc("ngSubmit",(function(){return t.onSubmit()})),d.Vb(11,"div",6),d.Vb(12,"div",7),d.Vb(13,"mat-form-field",8),d.Vb(14,"mat-label"),d.Cc(15),d.ic(16,"translate"),d.Ub(),d.Qb(17,"input",9),d.Bc(18,w,4,6,"mat-error",10),d.Ub(),d.Ub(),d.Vb(19,"div",7),d.Vb(20,"mat-form-field",8),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Qb(24,"input",11),d.Bc(25,k,4,6,"mat-error",10),d.Ub(),d.Ub(),d.Ub(),d.Vb(26,"mat-form-field",8),d.Vb(27,"mat-label"),d.Cc(28),d.ic(29,"translate"),d.Ub(),d.Qb(30,"input",12),d.Bc(31,j,4,6,"mat-error",10),d.Ub(),d.Vb(32,"div",6),d.Vb(33,"div",7),d.Vb(34,"mat-form-field",13),d.Vb(35,"mat-label"),d.Cc(36),d.ic(37,"translate"),d.Ub(),d.Qb(38,"input",14),d.Qb(39,"mat-datepicker-toggle",15),d.Qb(40,"mat-datepicker",16,17),d.Bc(42,F,4,6,"mat-error",10),d.Ub(),d.Ub(),d.Vb(43,"div",7),d.Vb(44,"mat-form-field",8),d.Vb(45,"mat-label"),d.Cc(46),d.ic(47,"translate"),d.Ub(),d.Vb(48,"mat-select",18),d.Bc(49,P,3,4,"mat-option",19),d.Ub(),d.Bc(50,E,4,6,"mat-error",10),d.Ub(),d.Ub(),d.Ub(),d.Vb(51,"div",6),d.Vb(52,"div",7),d.Vb(53,"mat-form-field",8),d.Vb(54,"mat-label"),d.Cc(55),d.ic(56,"translate"),d.Ub(),d.Vb(57,"mat-select",20),d.Bc(58,S,3,4,"mat-option",19),d.Ub(),d.Bc(59,D,4,6,"mat-error",10),d.Ub(),d.Ub(),d.Vb(60,"div",7),d.Vb(61,"mat-form-field",8),d.Vb(62,"mat-label"),d.Cc(63),d.ic(64,"translate"),d.Ub(),d.Vb(65,"mat-select",21),d.Bc(66,O,3,4,"mat-option",19),d.Ub(),d.Bc(67,N,4,6,"mat-error",10),d.Ub(),d.Ub(),d.Ub(),d.Bc(68,x,27,26,"div",22),d.Bc(69,I,3,3,"p",23),d.Vb(70,"div",24),d.Vb(71,"div",7),d.Vb(72,"button",25),d.Cc(73),d.Ub(),d.Ub(),d.Vb(74,"div",7),d.Vb(75,"button",26),d.dc("click",(function(){return t.resetForm()})),d.Vb(76,"mat-icon"),d.Cc(77,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){var i=d.sc(41);d.Cb(7),d.Dc(d.jc(8,26,"Employee")),d.Cb(3),d.nc("formGroup",t.employeeForm),d.Cb(5),d.Dc(d.jc(16,28,"First-name")),d.Cb(3),d.nc("ngIf",t.hasCustomError(t.employeeForm,"firstName")),d.Cb(4),d.Dc(d.jc(23,30,"Last-name")),d.Cb(3),d.nc("ngIf",t.hasCustomError(t.employeeForm,"lastName")),d.Cb(3),d.Dc(d.jc(29,32,"Email")),d.Cb(3),d.nc("ngIf",t.hasCustomError(t.employeeForm,"email")),d.Cb(5),d.Dc(d.jc(37,34,"Date-of-birth")),d.Cb(2),d.nc("matDatepicker",i),d.Cb(1),d.nc("for",i),d.Cb(3),d.nc("ngIf",t.hasCustomError(t.employeeForm,"dateOfBirth")),d.Cb(4),d.Dc(d.jc(47,36,"Gender")),d.Cb(3),d.nc("ngForOf",t.genders),d.Cb(1),d.nc("ngIf",t.hasCustomError(t.employeeForm,"gender")),d.Cb(5),d.Dc(d.jc(56,38,"Job-pos")),d.Cb(3),d.nc("ngForOf",t.jobs),d.Cb(1),d.nc("ngIf",t.hasCustomError(t.employeeForm,"position")),d.Cb(4),d.Dc(d.jc(64,40,"Role")),d.Cb(3),d.nc("ngForOf",t.roles),d.Cb(1),d.nc("ngIf",t.hasCustomError(t.employeeForm,"role")),d.Cb(1),d.nc("ngIf",t.showPasswordForm),d.Cb(1),d.nc("ngIf",!t.havePermission),d.Cb(3),d.nc("disabled",!t.havePermission),d.Cb(1),d.Ec(" ",t.getButtonState()," "),d.Cb(2),d.nc("disabled",!t.havePermission)}},directives:[h.a,C.g,b.c,y.a,l.r,l.l,l.f,C.c,C.f,v.b,l.b,l.k,l.e,r.l,U.b,U.d,U.a,V.a,r.k,C.b,g.n],pipes:[f.d],styles:[""]}),q),B=i("jaxi");function _(e,t){if(1&e&&(d.Vb(0,"mat-option",8),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&e){var i=t.$implicit;d.nc("value",i.value),d.Cb(1),d.Ec(" ",d.jc(2,2,i.title)," ")}}function Q(e,t){if(1&e&&(d.Vb(0,"mat-option",8),d.Cc(1),d.Ub()),2&e){var i=t.$implicit;d.nc("value",i.id),d.Cb(1),d.Ec(" ",i.lastName+" "+i.firstName," ")}}function M(e,t){if(1&e){var i=d.Wb();d.Vb(0,"li",25),d.Vb(1,"div",4),d.Vb(2,"div",17),d.Vb(3,"button",26),d.dc("click",(function(){d.uc(i);var e=t.$implicit;return d.hc().selectEmployee(e.id)})),d.Vb(4,"h6"),d.Vb(5,"u"),d.Cc(6),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(7,"div",19),d.Vb(8,"h5"),d.Cc(9),d.ic(10,"translate"),d.Ub(),d.Ub(),d.Vb(11,"div",20),d.Vb(12,"button",27),d.dc("click",(function(){d.uc(i);var e=t.$implicit;return d.hc().delete(e)})),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var r=t.$implicit;d.Cb(6),d.Dc(r.firstName+" "+r.lastName),d.Cb(3),d.Ec(" ",d.jc(10,3,r.position)," "),d.Cb(4),d.Ec(" ",d.jc(14,5,"Delete")," ")}}function A(e,t){1&e&&(d.Vb(0,"li",16),d.Vb(1,"i"),d.Cc(2),d.ic(3,"translate"),d.Ub(),d.Ub()),2&e&&(d.Cb(2),d.Dc(d.jc(3,1,"Empty")))}function G(e,t){if(1&e){var i=d.Wb();d.Vb(0,"div",28),d.Vb(1,"div",2),d.Vb(2,"h3"),d.Cc(3),d.ic(4,"translate"),d.Ub(),d.Ub(),d.Qb(5,"hr"),d.Vb(6,"div",29),d.Vb(7,"div",30),d.Qb(8,"img",31),d.Vb(9,"h4",32),d.Cc(10),d.Ub(),d.Qb(11,"br"),d.Vb(12,"ul",33),d.Vb(13,"li",34),d.Vb(14,"mat-icon"),d.Cc(15,"email"),d.Ub(),d.Cc(16),d.Ub(),d.Vb(17,"li",34),d.Vb(18,"mat-icon"),d.Cc(19,"vpn_key"),d.Ub(),d.Cc(20),d.ic(21,"translate"),d.ic(22,"translate"),d.Ub(),d.Vb(23,"li",34),d.Vb(24,"mat-icon"),d.Cc(25,"business_center"),d.Ub(),d.Cc(26),d.ic(27,"translate"),d.Ub(),d.Vb(28,"li",34),d.Vb(29,"mat-icon"),d.Cc(30,"perm_contact_calendar"),d.Ub(),d.Cc(31),d.ic(32,"date"),d.Ub(),d.Vb(33,"li",34),d.Vb(34,"mat-icon"),d.Cc(35,"person"),d.Ub(),d.Cc(36),d.ic(37,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Vb(38,"div",35),d.Vb(39,"div",36),d.Vb(40,"button",37),d.dc("click",(function(){d.uc(i);var e=d.hc();return e.addOrUpdate(e.employeeSelected.id)})),d.Cc(41),d.ic(42,"translate"),d.Ub(),d.Vb(43,"button",38),d.dc("click",(function(){d.uc(i);var e=d.hc();return e.goToJobs(e.employeeSelected.id)})),d.Cc(44),d.ic(45,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var r=d.hc();d.Cb(3),d.Dc(d.jc(4,10,"Info")),d.Cb(5),d.nc("src",r.employeeSelected.picture,d.wc),d.Cb(2),d.Ec(" ",r.employeeSelected.firstName+" "+r.employeeSelected.lastName," "),d.Cb(6),d.Ec(" ",r.employeeSelected.email," "),d.Cb(4),d.Ec(" ",d.jc(21,12,"Role")+": "+d.jc(22,14,r.employeeSelected.role)," "),d.Cb(6),d.Ec(" ",d.jc(27,16,r.employeeSelected.position)," "),d.Cb(5),d.Ec(" ",d.kc(32,18,r.employeeSelected.dateOfBirth,"yyyy-MM-dd")," "),d.Cb(5),d.Ec(" ",d.jc(37,21,r.employeeSelected.gender)," "),d.Cb(5),d.Dc(d.jc(42,23,"Update")),d.Cb(3),d.Dc(d.jc(45,25,"Manage-jobs"))}}var J,R=((J=function(){function e(t,i,r,a,c,n,s){_classCallCheck(this,e),this.fb=t,this.employeeService=i,this.accountService=r,this.router=a,this.toastr=c,this.dialog=n,this.translate=s,this.employees=[],this.employeeFiltered=[],this.employeeSelected=null,this.destroy$=new o.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.jobs=Object(n.e)(s.d),this.createForm(),this.getEmployees()}},{key:"createForm",value:function(){this.filterForm=this.fb.group({job:"*",id:null})}},{key:"getEmployees",value:function(){var e=this;this.employeeService.all().pipe(Object(c.a)(this.destroy$)).subscribe((function(t){e.employees=t,e.employeeFiltered=e.employees,e.employeeSelected&&e.selectEmployee(e.employeeSelected.id)}),(function(e){console.log(e)}))}},{key:"selectEmployee",value:function(e){this.employeeSelected=this.employeeFiltered.find((function(t){return t.id===e}))}},{key:"addOrUpdate",value:function(e){var t=this,i=this.selectedOrDefaultEmployee(e);this.dialog.open($,{width:"34%",autoFocus:!0,data:i}).afterClosed().pipe(Object(c.a)(this.destroy$)).subscribe((function(e){e&&t.refreshData(e)}))}},{key:"delete",value:function(e){var t=this;this.accountService.isAdmin||e.role.toUpperCase()!=="Admin".toUpperCase()?this.accountService.getCurrentUser.id!==e.id?Object(n.d)(e.firstName+" "+e.lastName,this.translate)&&this.employeeService.delete(e.id).pipe(Object(c.a)(this.destroy$)).subscribe((function(){return t.employees=t.employees.filter((function(t){return t.id!==e.id}))}),(function(e){t.toastr.error(t.translate.instant("Failed"),t.translate.instant("Error")),console.log(e)})):alert(this.translate.instant("Not-delete-yourself")):alert(this.translate.instant("Not-allowed"))}},{key:"goToJobs",value:function(e){this.router.navigate(["/job/job-list/",e])}},{key:"filterJobs",value:function(e){var t=this;this.employeeFiltered="*"!==e?this.employees.filter((function(e){return e.position.toUpperCase().includes(t.filterForm.value.job.toUpperCase())})):this.employees}},{key:"resetForm",value:function(){this.filterForm.reset(),this.employeeSelected=null,this.employeeFiltered=this.employees}},{key:"refreshData",value:function(e){var t=this,i=e.data,r=e.action;this.employeeService.get(i).pipe(Object(c.a)(this.destroy$)).subscribe((function(e){Object(n.i)(r,t.employees,e,(function(e){return e.id===i})),t.employeeSelected&&t.employeeSelected.id===i&&(t.employeeSelected=e)}))}},{key:"selectedOrDefaultEmployee",value:function(e){return e?this.employeeFiltered.find((function(t){return t.id===e})):{id:null,firstName:null,lastName:null,gender:null,dateOfBirth:null,position:null,email:null,role:null,picture:null,contentType:null}}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||J)(d.Pb(l.c),d.Pb(u.a),d.Pb(m.a),d.Pb(a.b),d.Pb(p.b),d.Pb(b.b),d.Pb(f.e))},J.\u0275cmp=d.Jb({type:J,selectors:[["app-employee-details"]],decls:54,vars:28,consts:[[1,"row","pl-2"],[1,"col-md-7"],[1,"text-center","my-2"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-5"],["appearance","standard"],["formControlName","job",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","id",3,"selectionChange"],[1,"col-md-2"],[1,"my-auto"],[3,"click"],[1,"px-2","mt-2"],[1,"list-group"],[1,"list-group-item"],[1,"col-md-6","my-auto"],[1,"font-weight-bold"],[1,"col-md-3","my-auto"],[1,"col-md-3"],["mat-raised-button","","color","primary",1,"btn","btn-sm",3,"click"],["class","list-group-item mt-1 border rounded",4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"list-group-item","mt-1","border","rounded"],["mat-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",1,"ml-3",3,"click"],[1,"col-md-4"],[1,"card"],[1,"card-body","my-auto"],["alt","",1,"img-fluid","rounded","w-75","mb-3","d-block","mx-auto",3,"src"],[1,"text-center"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-inline-flex"],[1,"card-footer"],[1,"d-flex","justify-content-center"],[1,"btn","btn-warning","mx-1",3,"click"],[1,"btn","btn-success","mx-1",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"h3"),d.Cc(4),d.ic(5,"translate"),d.Ub(),d.Ub(),d.Qb(6,"hr"),d.Vb(7,"form",3),d.Vb(8,"div",4),d.Vb(9,"div",5),d.Vb(10,"mat-form-field",6),d.Vb(11,"mat-label"),d.Cc(12),d.ic(13,"translate"),d.Ub(),d.Vb(14,"mat-select",7),d.dc("selectionChange",(function(e){return t.filterJobs(e.value)})),d.Vb(15,"mat-option",8),d.Cc(16),d.ic(17,"translate"),d.Ub(),d.Bc(18,_,3,4,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(19,"div",5),d.Vb(20,"mat-form-field",6),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Vb(24,"mat-select",10),d.dc("selectionChange",(function(e){return t.selectEmployee(e.value)})),d.Bc(25,Q,2,2,"mat-option",9),d.Ub(),d.Ub(),d.Ub(),d.Vb(26,"div",11),d.Vb(27,"mat-button-toggle-group",12),d.Vb(28,"mat-button-toggle",13),d.dc("click",(function(){return t.resetForm()})),d.Vb(29,"mat-icon"),d.Cc(30,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(31,"div",14),d.Vb(32,"ul",15),d.Vb(33,"li",16),d.Vb(34,"div",4),d.Vb(35,"div",17),d.Vb(36,"h5",18),d.Vb(37,"i"),d.Cc(38),d.ic(39,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Vb(40,"div",19),d.Vb(41,"h5",18),d.Vb(42,"i"),d.Cc(43),d.ic(44,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Vb(45,"div",20),d.Vb(46,"button",21),d.dc("click",(function(){return t.addOrUpdate(null)})),d.Vb(47,"mat-icon"),d.Cc(48,"add"),d.Ub(),d.Cc(49),d.ic(50,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Bc(51,M,15,7,"li",22),d.Bc(52,A,4,3,"li",23),d.Ub(),d.Ub(),d.Ub(),d.Bc(53,G,46,27,"div",24),d.Ub()),2&e&&(d.Cb(4),d.Dc(d.jc(5,14,"Employee-management")),d.Cb(3),d.nc("formGroup",t.filterForm),d.Cb(5),d.Dc(d.jc(13,16,"Job-pos")),d.Cb(3),d.nc("value","*"),d.Cb(1),d.Ec(" ",d.jc(17,18,"All")," "),d.Cb(2),d.nc("ngForOf",t.jobs),d.Cb(4),d.Dc(d.jc(23,20,"Employee")),d.Cb(3),d.nc("ngForOf",t.employeeFiltered),d.Cb(13),d.Dc(d.jc(39,22,"Employees")),d.Cb(5),d.Dc(d.jc(44,24,"Job-pos")),d.Cb(6),d.Ec(" ",d.jc(50,26,"Create")," "),d.Cb(2),d.nc("ngForOf",t.employeeFiltered),d.Cb(1),d.nc("ngIf",0===t.employeeFiltered.length),d.Cb(1),d.nc("ngIf",t.employeeSelected))},directives:[l.r,l.l,l.f,C.c,C.f,V.a,l.k,l.e,g.n,r.k,B.b,B.a,y.a,h.a,r.l],pipes:[f.d,r.e],styles:[".mat-icon{margin-right:7px}"]}),J),L=i("4Q6e"),T=["pictureFile"];function H(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Picture")," ",d.jc(3,4,"is-required")," "))}var W,X=((W=function(){function e(t,i,r,a){_classCallCheck(this,e),this.employeeService=t,this.toastr=i,this.matDialogRef=r,this.translate=a,this.hasError=!1,this.destroy$=new o.a}return _createClass(e,[{key:"ngOnInit",value:function(){Object(n.b)(this.toastr)}},{key:"onUpload",value:function(e){this.hasError=!1,this.file=e.target.files[0]}},{key:"resetForm",value:function(){this.hasError=!1,this.pictureFile.nativeElement.value=null,this.file=null}},{key:"onSubmit",value:function(){this.file?this.changePicture():this.hasError=!0}},{key:"changePicture",value:function(){var e=this,t=new FormData;t.append("picture",this.file),this.employeeService.updatePicture(t).pipe(Object(c.a)(this.destroy$)).subscribe((function(){e.toastr.success(e.translate.instant("Done"),e.translate.instant("Success")),e.matDialogRef.close({action:s.a.Update})}),(function(t){e.toastr.error(e.translate.instant("Failed"),e.translate.instant("Error")),console.log(t)}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||W)(d.Pb(u.a),d.Pb(p.b),d.Pb(b.e),d.Pb(f.e))},W.\u0275cmp=d.Jb({type:W,selectors:[["app-change-avatar"]],viewQuery:function(e,t){var i;1&e&&d.Ic(T,!0),2&e&&d.rc(i=d.ec())&&(t.pictureFile=i.first)},decls:29,vars:10,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["multiple","","type","file","accept","image/*",1,"form-control-file",3,"change"],["pictureFile",""],[4,"ngIf"],[1,"row","px-2","mt-4"],[1,"col-md-6"],["mat-raised-button","","type","submit","color","primary",1,"btn-block"],["mat-raised-button","","type","button",1,"btn-block",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Cc(5,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"h3",4),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Qb(9,"hr"),d.Vb(10,"form",5),d.dc("ngSubmit",(function(){return t.onSubmit()})),d.Vb(11,"div",6),d.Vb(12,"label"),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Qb(15,"br"),d.Vb(16,"input",7,8),d.dc("change",(function(e){return t.onUpload(e)})),d.Ub(),d.Qb(18,"br"),d.Bc(19,H,4,6,"mat-error",9),d.Ub(),d.Vb(20,"div",10),d.Vb(21,"div",11),d.Vb(22,"button",12),d.Cc(23),d.ic(24,"translate"),d.Ub(),d.Ub(),d.Vb(25,"div",11),d.Vb(26,"button",13),d.dc("click",(function(){return t.resetForm()})),d.Vb(27,"mat-icon"),d.Cc(28,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(7),d.Dc(d.jc(8,4,"Picture")),d.Cb(6),d.Dc(d.jc(14,6,"Choose-pic")),d.Cb(6),d.nc("ngIf",t.hasError),d.Cb(4),d.Ec(" ",d.jc(24,8,"Save")," "))},directives:[h.a,C.g,b.c,y.a,l.r,l.l,l.m,r.l,C.b],pipes:[f.d],styles:["label[_ngcontent-%COMP%]{font-size:16px}"]}),W);function K(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Fc(" ",d.jc(2,2,"Current-password")," ",d.jc(3,4,"is-required")," "))}function z(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.ic(3,"translate"),d.ic(4,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Gc(" ",d.jc(2,3,"New-password")," ",d.jc(3,5,"is-required"),".",d.jc(4,7,"min-6")," "))}function Y(e,t){1&e&&(d.Vb(0,"mat-error"),d.Cc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Ec(" ",d.jc(2,1,"Pass-not-match")," "))}var Z,ee=((Z=function(){function e(t,i,r,a,c){_classCallCheck(this,e),this.authService=t,this.toastr=i,this.fb=r,this.matDialogRef=a,this.trasnlate=c,this.hideCurrent=!0,this.hideNewPassword=!0,this.hideConfirm=!0,this.destroy$=new o.a,this.hasCustomError=function(e,t){return Object(n.g)(e,t)}}return _createClass(e,[{key:"ngOnInit",value:function(){this.createForm(),Object(n.b)(this.toastr)}},{key:"createForm",value:function(){this.passwordForm=this.fb.group({currentPassword:[null,[l.q.required]],newPassword:[null,[l.q.required,l.q.minLength(6)]],confirmPassword:[null,[l.q.required]]})}},{key:"onSubmit",value:function(){this.passwordForm.valid?this.changePassword():this.passwordForm.markAllAsTouched()}},{key:"checkPasswordsMatch",value:function(e){var t=this.passwordForm.value;return!(!t.newPassword||!t.confirmPassword||t.newPassword!==t.confirmPassword&&(this.passwordForm.get("confirmPassword").setErrors({error:"New password does not match with confirm password"}),1))}},{key:"changePassword",value:function(){var e=this;if(!this.checkPasswordsMatch(null))return!1;this.authService.changePassword(this.passwordForm.value).pipe(Object(c.a)(this.destroy$)).subscribe((function(){e.toastr.success(e.trasnlate.instant("Changed"),e.trasnlate.instant("Success")),e.matDialogRef.close()}),(function(t){e.toastr.error(e.trasnlate.instant("Failed"),e.trasnlate.instant("Error")),console.log(t)}))}},{key:"resetForm",value:function(){this.passwordForm.reset()}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}()).\u0275fac=function(e){return new(e||Z)(d.Pb(m.a),d.Pb(p.b),d.Pb(l.c),d.Pb(b.e),d.Pb(f.e))},Z.\u0275cmp=d.Jb({type:Z,selectors:[["app-change-password"]],decls:47,vars:31,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],["appearance","standard"],["matInput","","formControlName","currentPassword",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],["matInput","","formControlName","newPassword",3,"type","input"],["matInput","","formControlName","confirmPassword",3,"type","input"],[1,"row","px-2","mt-4"],[1,"col-md-6"],["mat-raised-button","","type","submit","color","primary",1,"btn-block"],["mat-raised-button","","type","button",1,"btn-block",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"button",3),d.Vb(4,"mat-icon"),d.Cc(5,"close"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"h3",4),d.Cc(7),d.ic(8,"translate"),d.Ub(),d.Qb(9,"hr"),d.Vb(10,"form",5),d.dc("ngSubmit",(function(){return t.onSubmit()})),d.Vb(11,"mat-form-field",6),d.Vb(12,"mat-label"),d.Cc(13),d.ic(14,"translate"),d.Ub(),d.Qb(15,"input",7),d.Vb(16,"button",8),d.dc("click",(function(){return t.hideCurrent=!t.hideCurrent})),d.Vb(17,"mat-icon"),d.Cc(18),d.Ub(),d.Ub(),d.Bc(19,K,4,6,"mat-error",9),d.Ub(),d.Vb(20,"mat-form-field",6),d.Vb(21,"mat-label"),d.Cc(22),d.ic(23,"translate"),d.Ub(),d.Vb(24,"input",10),d.dc("input",(function(e){return t.checkPasswordsMatch(e.value)})),d.Ub(),d.Vb(25,"button",8),d.dc("click",(function(){return t.hideNewPassword=!t.hideNewPassword})),d.Vb(26,"mat-icon"),d.Cc(27),d.Ub(),d.Ub(),d.Bc(28,z,5,9,"mat-error",9),d.Ub(),d.Vb(29,"mat-form-field",6),d.Vb(30,"mat-label"),d.Cc(31),d.ic(32,"translate"),d.Ub(),d.Vb(33,"input",11),d.dc("input",(function(e){return t.checkPasswordsMatch(e.value)})),d.Ub(),d.Vb(34,"button",8),d.dc("click",(function(){return t.hideConfirm=!t.hideConfirm})),d.Vb(35,"mat-icon"),d.Cc(36),d.Ub(),d.Ub(),d.Bc(37,Y,3,3,"mat-error",9),d.Ub(),d.Vb(38,"div",12),d.Vb(39,"div",13),d.Vb(40,"button",14),d.Cc(41),d.ic(42,"translate"),d.Ub(),d.Ub(),d.Vb(43,"div",13),d.Vb(44,"button",15),d.dc("click",(function(){return t.resetForm()})),d.Vb(45,"mat-icon"),d.Cc(46,"cached"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(7),d.Dc(d.jc(8,21,"Password")),d.Cb(3),d.nc("formGroup",t.passwordForm),d.Cb(3),d.Dc(d.jc(14,23,"Current-password")),d.Cb(2),d.nc("type",t.hideCurrent?"password":"text"),d.Cb(1),d.Db("aria-label","Hide password")("aria-pressed",t.hideCurrent),d.Cb(2),d.Dc(t.hideCurrent?"visibility_off":"visibility"),d.Cb(1),d.nc("ngIf",t.hasCustomError(t.passwordForm,"currentPassword")),d.Cb(3),d.Dc(d.jc(23,25,"New-password")),d.Cb(2),d.nc("type",t.hideNewPassword?"password":"text"),d.Cb(1),d.Db("aria-label","Hide password")("aria-pressed",t.hideNewPassword),d.Cb(2),d.Dc(t.hideNewPassword?"visibility_off":"visibility"),d.Cb(1),d.nc("ngIf",t.hasCustomError(t.passwordForm,"newPassword")),d.Cb(3),d.Dc(d.jc(32,27,"Confirm-password")),d.Cb(2),d.nc("type",t.hideConfirm?"password":"text"),d.Cb(1),d.Db("aria-label","Hide password")("aria-pressed",t.hideConfirm),d.Cb(2),d.Dc(t.hideConfirm?"visibility_off":"visibility"),d.Cb(1),d.nc("ngIf",t.hasCustomError(t.passwordForm,"confirmPassword")),d.Cb(4),d.Ec(" ",d.jc(42,29,"Change-password")," "))},directives:[h.a,C.g,b.c,y.a,l.r,l.l,l.f,C.c,C.f,v.b,l.b,l.k,l.e,r.l,C.b],pipes:[f.d],styles:[""]}),Z),te=i("Xa2L");function ie(e,t){if(1&e){var i=d.Wb();d.Vb(0,"div",2),d.Vb(1,"div",3),d.Qb(2,"img",4),d.Vb(3,"h4",5),d.Cc(4),d.Ub(),d.Qb(5,"br"),d.Vb(6,"ul",6),d.Vb(7,"li",7),d.Vb(8,"mat-icon"),d.Cc(9,"email"),d.Ub(),d.Cc(10),d.Ub(),d.Vb(11,"li",7),d.Vb(12,"mat-icon"),d.Cc(13," vpn_key"),d.Ub(),d.Cc(14),d.ic(15,"translate"),d.Ub(),d.Vb(16,"li",7),d.Vb(17,"mat-icon"),d.Cc(18,"business_center"),d.Ub(),d.Cc(19),d.Ub(),d.Vb(20,"li",7),d.Vb(21,"mat-icon"),d.Cc(22,"perm_contact_calendar"),d.Ub(),d.Cc(23),d.ic(24,"date"),d.Ub(),d.Vb(25,"li",7),d.Vb(26,"mat-icon"),d.Cc(27,"person"),d.Ub(),d.Cc(28),d.Ub(),d.Ub(),d.Ub(),d.Vb(29,"div",8),d.Vb(30,"div",9),d.Vb(31,"button",10),d.dc("click",(function(){return d.uc(i),d.hc().changeAvatar()})),d.Cc(32),d.ic(33,"translate"),d.Ub(),d.Vb(34,"button",11),d.dc("click",(function(){return d.uc(i),d.hc().changePassword()})),d.Cc(35),d.ic(36,"translate"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var r=d.hc();d.Cb(2),d.nc("src",r.employee.picture,d.wc),d.Cb(2),d.Ec(" ",r.employee.firstName+" "+r.employee.lastName," "),d.Cb(6),d.Ec(" ",r.employee.email," "),d.Cb(4),d.Ec(" ",d.jc(15,9,"Role")+": "+r.employee.role," "),d.Cb(5),d.Ec(" ",r.employee.position," "),d.Cb(4),d.Ec(" ",d.kc(24,11,r.employee.dateOfBirth,"yyyy-MM-dd")," "),d.Cb(5),d.Ec(" ",r.employee.gender," "),d.Cb(4),d.Ec(" ",d.jc(33,14,"Change-avatar")," "),d.Cb(3),d.Ec(" ",d.jc(36,16,"Change-password")," ")}}function re(e,t){1&e&&d.Qb(0,"mat-spinner",12)}var ae,oe,ce,ne=[{path:"",component:R,canActivate:[L.a],canLoad:[L.a]},{path:"profile",component:(ae=function(){function e(t,i){_classCallCheck(this,e),this.employeeService=t,this.matDialog=i,this.employee=null,this.destroy$=new o.a}return _createClass(e,[{key:"ngOnInit",value:function(){this.getProfile()}},{key:"getProfile",value:function(){var e=this;this.employeeService.profile().pipe(Object(c.a)(this.destroy$)).subscribe((function(t){return e.employee=t}))}},{key:"changeAvatar",value:function(){var e=this;this.matDialog.open(X,{width:"30%",autoFocus:!0}).afterClosed().pipe(Object(c.a)(this.destroy$)).subscribe((function(t){t&&e.getProfile()}))}},{key:"changePassword",value:function(){this.matDialog.open(ee,{width:"30%",autoFocus:!0})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}}]),e}(),ae.\u0275fac=function(e){return new(e||ae)(d.Pb(u.a),d.Pb(b.b))},ae.\u0275cmp=d.Jb({type:ae,selectors:[["app-profile"]],decls:2,vars:2,consts:[["class","card col-md-5 d-block mx-auto mt-4",4,"ngIf"],["class","d-block mx-auto mt-5",4,"ngIf"],[1,"card","col-md-5","d-block","mx-auto","mt-4"],[1,"card-body","my-auto"],[1,"img-fluid","mb-3","d-block","mx-auto",3,"src"],[1,"text-center"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-inline-flex"],[1,"card-footer"],[1,"d-flex","justify-content-center"],["mat-raised-button","","color","primary",1,"mx-2",3,"click"],["mat-raised-button","","color","accent",1,"mx-2",3,"click"],[1,"d-block","mx-auto","mt-5"]],template:function(e,t){1&e&&(d.Bc(0,ie,37,18,"div",0),d.Bc(1,re,1,0,"mat-spinner",1)),2&e&&(d.nc("ngIf",t.employee),d.Cb(1),d.nc("ngIf",!t.employee))},directives:[r.l,y.a,h.a,te.b],pipes:[f.d,r.e],styles:["img[_ngcontent-%COMP%]{height:250px!important;width:auto}"]}),ae)}],se=((oe=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:oe}),oe.\u0275inj=d.Mb({factory:function(e){return new(e||oe)},imports:[[a.e.forChild(ne)],a.e]}),oe),le=i("PCNd"),be=((ce=function e(){_classCallCheck(this,e)}).\u0275mod=d.Nb({type:ce}),ce.\u0275inj=d.Mb({factory:function(e){return new(e||ce)},imports:[[r.c,se,le.a]]}),ce)}}]);