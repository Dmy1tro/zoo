(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{imCA:function(t,e,i){"use strict";i.r(e),i.d(e,"EmployeeModule",(function(){return rt}));var r=i("ofXK"),o=i("tyNb"),a=i("XNiG"),c=i("1G5W"),s=i("Ojd6"),n=i("wFOr"),b=i("3Pt+"),l=i("0IaG"),m=i("fXoL"),d=i("kar1"),u=i("483E"),p=i("5eHb"),h=i("sYmb"),f=i("bTqV"),C=i("kmnG"),U=i("NFeN"),y=i("qFsG"),V=i("iadO"),g=i("d3UM"),v=i("FKr1");function w(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"First-name")," ",m.jc(3,4,"is-required")," "))}function j(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Last-name")," ",m.jc(3,4,"is-required")," "))}function F(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Email")," ",m.jc(3,4,"is-required")," "))}function P(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Date-of-birth")," ",m.jc(3,4,"is-required")," "))}function E(t,e){if(1&t&&(m.Vb(0,"mat-option",27),m.Cc(1),m.ic(2,"translate"),m.Ub()),2&t){const t=e.$implicit;m.nc("value",t.value),m.Cb(1),m.Ec(" ",m.jc(2,2,t.title)," ")}}function k(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Gender")," ",m.jc(3,4,"is-required")," "))}function S(t,e){if(1&t&&(m.Vb(0,"mat-option",27),m.Cc(1),m.ic(2,"translate"),m.Ub()),2&t){const t=e.$implicit;m.nc("value",t.value),m.Cb(1),m.Ec(" ",m.jc(2,2,t.title)," ")}}function D(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Job-pos")," ",m.jc(3,4,"is-required")," "))}function O(t,e){if(1&t&&(m.Vb(0,"mat-option",27),m.Cc(1),m.ic(2,"translate"),m.Ub()),2&t){const t=e.$implicit;m.nc("value",t.value),m.Cb(1),m.Ec(" ",m.jc(2,2,t.title)," ")}}function N(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Role")," ",m.jc(3,4,"is-required")," "))}function x(t,e){if(1&t){const t=m.Wb();m.Vb(0,"div",6),m.Vb(1,"div",7),m.Vb(2,"mat-form-field",8),m.Vb(3,"mat-label"),m.Cc(4),m.ic(5,"translate"),m.Ub(),m.Vb(6,"input",28),m.dc("input",(function(e){return m.uc(t),m.hc().checkPasswordsMatch(e.value)})),m.Ub(),m.Vb(7,"button",29),m.dc("click",(function(){m.uc(t);const e=m.hc();return e.hide=!e.hide})),m.Vb(8,"mat-icon"),m.Cc(9),m.Ub(),m.Ub(),m.Vb(10,"mat-error"),m.Cc(11),m.ic(12,"translate"),m.ic(13,"translate"),m.ic(14,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Vb(15,"div",7),m.Vb(16,"mat-form-field",8),m.Vb(17,"mat-label"),m.Cc(18),m.ic(19,"translate"),m.Ub(),m.Vb(20,"input",30),m.dc("input",(function(e){return m.uc(t),m.hc().checkPasswordsMatch(e.value)})),m.Ub(),m.Vb(21,"button",29),m.dc("click",(function(){m.uc(t);const e=m.hc();return e.hideConfirm=!e.hideConfirm})),m.Vb(22,"mat-icon"),m.Cc(23),m.Ub(),m.Ub(),m.Vb(24,"mat-error"),m.Cc(25),m.ic(26,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&t){const t=m.hc();m.Cb(4),m.Dc(m.jc(5,14,"Password")),m.Cb(2),m.nc("type",t.hide?"password":"text"),m.Cb(1),m.Db("aria-label","Hide password")("aria-pressed",t.hide),m.Cb(2),m.Dc(t.hide?"visibility_off":"visibility"),m.Cb(2),m.Gc(" ",m.jc(12,16,"Password")," ",m.jc(13,18,"is-required"),". ",m.jc(14,20,"min-6")," "),m.Cb(7),m.Dc(m.jc(19,22,"Confirm-password")),m.Cb(2),m.nc("type",t.hideConfirm?"password":"text"),m.Cb(1),m.Db("aria-label","Hide password")("aria-pressed",t.hideConfirm),m.Cb(2),m.Dc(t.hideConfirm?"visibility_off":"visibility"),m.Cb(2),m.Ec(" ",m.jc(26,24,"Pass-not-match")," ")}}function I(t,e){1&t&&(m.Vb(0,"p",31),m.Cc(1),m.ic(2,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Ec(" ",m.jc(2,1,"Not-allowed")," "))}let q=(()=>{class t{constructor(t,e,i,r,o,c,n){this.fb=t,this.accountService=e,this.employeeService=i,this.data=r,this.matDialogRef=o,this.toastr=c,this.translate=n,this.hide=!0,this.hideConfirm=!0,this.passError=null,this.havePermission=!1,this.isUpdate=!1,this.destroy$=new a.a,this.getButtonState=()=>this.translate.instant(Object(s.f)(this.isUpdate,"Employee")),this.hasCustomError=(t,e)=>Object(s.g)(t,e)}ngOnInit(){this.isUpdate=null!=this.data.id,this.havePermission=!this.data.role||this.data.role.toUpperCase()!=="Admin".toUpperCase()||this.accountService.isAdmin,this.genders=Object(s.e)(n.c),this.jobs=Object(s.e)(n.d),this.getAllowedRoles(),this.createForm(),Object(s.b)(this.toastr)}getAllowedRoles(){if(this.roles=Object(s.e)(n.f),!this.accountService.isAdmin&&this.havePermission){const t=this.roles.findIndex(t=>"Admin"===t.title);this.roles.splice(t,1)}}createForm(){this.employeeForm=this.fb.group({id:[this.data.id],firstName:[this.data.firstName,b.q.required],lastName:[this.data.lastName,b.q.required],email:[this.data.email,[b.q.required,b.q.email]],dateOfBirth:[this.data.dateOfBirth,b.q.required],gender:[this.data.gender,b.q.required],position:[this.data.position,b.q.required],role:[this.data.role,b.q.required]}),this.isUpdate||(this.employeeForm.addControl("password",new b.d(null,[b.q.required,b.q.minLength(6)])),this.employeeForm.addControl("confirmPassword",new b.d(null,b.q.required)))}get showPasswordForm(){return!this.isUpdate}onSubmit(){this.employeeForm.valid?this.isUpdate?this.update():this.create():this.employeeForm.markAllAsTouched()}create(){this.checkPasswordsMatch(null)&&(this.employeeForm.removeControl("confirmPassword"),this.accountService.create(this.employeeForm.value).pipe(Object(c.a)(this.destroy$)).subscribe(t=>{this.toastr.success(this.translate.instant("Created"),this.translate.instant("Success")),this.matDialogRef.close({action:n.a.Create,data:t.createdId})},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)}))}update(){this.employeeService.update(this.employeeForm.value).pipe(Object(c.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.translate.instant("Updated"),this.translate.instant("Success")),this.matDialogRef.close({action:n.a.Update,data:this.data.id})},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}checkPasswordsMatch(t){const e=this.employeeForm.value;return e.password&&e.confirmPassword?e.password!==e.confirmPassword?(this.employeeForm.get("confirmPassword").setErrors({error:"Password does not match with confirm password"}),this.passError="Password does not match with confirm password",!1):(this.passError=null,!0):(this.passError=null,!1)}resetForm(){this.createForm(),this.passError=null}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(b.c),m.Pb(d.a),m.Pb(u.a),m.Pb(l.a),m.Pb(l.e),m.Pb(p.b),m.Pb(h.e))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-create-update-employee"]],decls:78,vars:42,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],["appearance","standard"],["matInput","","formControlName","firstName"],[4,"ngIf"],["matInput","","formControlName","lastName"],["matInput","","formControlName","email","type","email"],["color","primary","appearance","standard"],["matInput","","formControlName","dateOfBirth","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker1",""],["formControlName","gender"],[3,"value",4,"ngFor","ngForOf"],["formControlName","position"],["formControlName","role"],["class","row",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"row","px-2","mt-4"],["mat-raised-button","","type","submit","color","primary",1,"btn-block",3,"disabled"],["mat-raised-button","","type","button",1,"btn-block",3,"disabled","click"],[3,"value"],["matInput","","formControlName","password",3,"type","input"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword",3,"type","input"],[1,"text-danger"]],template:function(t,e){if(1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Vb(3,"button",3),m.Vb(4,"mat-icon"),m.Cc(5,"close"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"h3",4),m.Cc(7),m.ic(8,"translate"),m.Ub(),m.Qb(9,"hr"),m.Vb(10,"form",5),m.dc("ngSubmit",(function(){return e.onSubmit()})),m.Vb(11,"div",6),m.Vb(12,"div",7),m.Vb(13,"mat-form-field",8),m.Vb(14,"mat-label"),m.Cc(15),m.ic(16,"translate"),m.Ub(),m.Qb(17,"input",9),m.Bc(18,w,4,6,"mat-error",10),m.Ub(),m.Ub(),m.Vb(19,"div",7),m.Vb(20,"mat-form-field",8),m.Vb(21,"mat-label"),m.Cc(22),m.ic(23,"translate"),m.Ub(),m.Qb(24,"input",11),m.Bc(25,j,4,6,"mat-error",10),m.Ub(),m.Ub(),m.Ub(),m.Vb(26,"mat-form-field",8),m.Vb(27,"mat-label"),m.Cc(28),m.ic(29,"translate"),m.Ub(),m.Qb(30,"input",12),m.Bc(31,F,4,6,"mat-error",10),m.Ub(),m.Vb(32,"div",6),m.Vb(33,"div",7),m.Vb(34,"mat-form-field",13),m.Vb(35,"mat-label"),m.Cc(36),m.ic(37,"translate"),m.Ub(),m.Qb(38,"input",14),m.Qb(39,"mat-datepicker-toggle",15),m.Qb(40,"mat-datepicker",16,17),m.Bc(42,P,4,6,"mat-error",10),m.Ub(),m.Ub(),m.Vb(43,"div",7),m.Vb(44,"mat-form-field",8),m.Vb(45,"mat-label"),m.Cc(46),m.ic(47,"translate"),m.Ub(),m.Vb(48,"mat-select",18),m.Bc(49,E,3,4,"mat-option",19),m.Ub(),m.Bc(50,k,4,6,"mat-error",10),m.Ub(),m.Ub(),m.Ub(),m.Vb(51,"div",6),m.Vb(52,"div",7),m.Vb(53,"mat-form-field",8),m.Vb(54,"mat-label"),m.Cc(55),m.ic(56,"translate"),m.Ub(),m.Vb(57,"mat-select",20),m.Bc(58,S,3,4,"mat-option",19),m.Ub(),m.Bc(59,D,4,6,"mat-error",10),m.Ub(),m.Ub(),m.Vb(60,"div",7),m.Vb(61,"mat-form-field",8),m.Vb(62,"mat-label"),m.Cc(63),m.ic(64,"translate"),m.Ub(),m.Vb(65,"mat-select",21),m.Bc(66,O,3,4,"mat-option",19),m.Ub(),m.Bc(67,N,4,6,"mat-error",10),m.Ub(),m.Ub(),m.Ub(),m.Bc(68,x,27,26,"div",22),m.Bc(69,I,3,3,"p",23),m.Vb(70,"div",24),m.Vb(71,"div",7),m.Vb(72,"button",25),m.Cc(73),m.Ub(),m.Ub(),m.Vb(74,"div",7),m.Vb(75,"button",26),m.dc("click",(function(){return e.resetForm()})),m.Vb(76,"mat-icon"),m.Cc(77,"cached"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&t){const t=m.sc(41);m.Cb(7),m.Dc(m.jc(8,26,"Employee")),m.Cb(3),m.nc("formGroup",e.employeeForm),m.Cb(5),m.Dc(m.jc(16,28,"First-name")),m.Cb(3),m.nc("ngIf",e.hasCustomError(e.employeeForm,"firstName")),m.Cb(4),m.Dc(m.jc(23,30,"Last-name")),m.Cb(3),m.nc("ngIf",e.hasCustomError(e.employeeForm,"lastName")),m.Cb(3),m.Dc(m.jc(29,32,"Email")),m.Cb(3),m.nc("ngIf",e.hasCustomError(e.employeeForm,"email")),m.Cb(5),m.Dc(m.jc(37,34,"Date-of-birth")),m.Cb(2),m.nc("matDatepicker",t),m.Cb(1),m.nc("for",t),m.Cb(3),m.nc("ngIf",e.hasCustomError(e.employeeForm,"dateOfBirth")),m.Cb(4),m.Dc(m.jc(47,36,"Gender")),m.Cb(3),m.nc("ngForOf",e.genders),m.Cb(1),m.nc("ngIf",e.hasCustomError(e.employeeForm,"gender")),m.Cb(5),m.Dc(m.jc(56,38,"Job-pos")),m.Cb(3),m.nc("ngForOf",e.jobs),m.Cb(1),m.nc("ngIf",e.hasCustomError(e.employeeForm,"position")),m.Cb(4),m.Dc(m.jc(64,40,"Role")),m.Cb(3),m.nc("ngForOf",e.roles),m.Cb(1),m.nc("ngIf",e.hasCustomError(e.employeeForm,"role")),m.Cb(1),m.nc("ngIf",e.showPasswordForm),m.Cb(1),m.nc("ngIf",!e.havePermission),m.Cb(3),m.nc("disabled",!e.havePermission),m.Cb(1),m.Ec(" ",e.getButtonState()," "),m.Cb(2),m.nc("disabled",!e.havePermission)}},directives:[f.a,C.g,l.c,U.a,b.r,b.l,b.f,C.c,C.f,y.b,b.b,b.k,b.e,r.l,V.b,V.d,V.a,g.a,r.k,C.b,v.n],pipes:[h.d],styles:[""]}),t})();var $=i("jaxi");function B(t,e){if(1&t&&(m.Vb(0,"mat-option",8),m.Cc(1),m.ic(2,"translate"),m.Ub()),2&t){const t=e.$implicit;m.nc("value",t.value),m.Cb(1),m.Ec(" ",m.jc(2,2,t.title)," ")}}function Q(t,e){if(1&t&&(m.Vb(0,"mat-option",8),m.Cc(1),m.Ub()),2&t){const t=e.$implicit;m.nc("value",t.id),m.Cb(1),m.Ec(" ",t.lastName+" "+t.firstName," ")}}function M(t,e){if(1&t){const t=m.Wb();m.Vb(0,"li",25),m.Vb(1,"div",4),m.Vb(2,"div",17),m.Vb(3,"button",26),m.dc("click",(function(){m.uc(t);const i=e.$implicit;return m.hc().selectEmployee(i.id)})),m.Vb(4,"h6"),m.Vb(5,"u"),m.Cc(6),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(7,"div",19),m.Vb(8,"h5"),m.Cc(9),m.ic(10,"translate"),m.Ub(),m.Ub(),m.Vb(11,"div",20),m.Vb(12,"button",27),m.dc("click",(function(){m.uc(t);const i=e.$implicit;return m.hc().delete(i)})),m.Cc(13),m.ic(14,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&t){const t=e.$implicit;m.Cb(6),m.Dc(t.firstName+" "+t.lastName),m.Cb(3),m.Ec(" ",m.jc(10,3,t.position)," "),m.Cb(4),m.Ec(" ",m.jc(14,5,"Delete")," ")}}function A(t,e){1&t&&(m.Vb(0,"li",16),m.Vb(1,"i"),m.Cc(2),m.ic(3,"translate"),m.Ub(),m.Ub()),2&t&&(m.Cb(2),m.Dc(m.jc(3,1,"Empty")))}function G(t,e){if(1&t){const t=m.Wb();m.Vb(0,"div",28),m.Vb(1,"div",2),m.Vb(2,"h3"),m.Cc(3),m.ic(4,"translate"),m.Ub(),m.Ub(),m.Qb(5,"hr"),m.Vb(6,"div",29),m.Vb(7,"div",30),m.Qb(8,"img",31),m.Vb(9,"h4",32),m.Cc(10),m.Ub(),m.Qb(11,"br"),m.Vb(12,"ul",33),m.Vb(13,"li",34),m.Vb(14,"mat-icon"),m.Cc(15,"email"),m.Ub(),m.Cc(16),m.Ub(),m.Vb(17,"li",34),m.Vb(18,"mat-icon"),m.Cc(19,"vpn_key"),m.Ub(),m.Cc(20),m.ic(21,"translate"),m.ic(22,"translate"),m.Ub(),m.Vb(23,"li",34),m.Vb(24,"mat-icon"),m.Cc(25,"business_center"),m.Ub(),m.Cc(26),m.ic(27,"translate"),m.Ub(),m.Vb(28,"li",34),m.Vb(29,"mat-icon"),m.Cc(30,"perm_contact_calendar"),m.Ub(),m.Cc(31),m.ic(32,"date"),m.Ub(),m.Vb(33,"li",34),m.Vb(34,"mat-icon"),m.Cc(35,"person"),m.Ub(),m.Cc(36),m.ic(37,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Vb(38,"div",35),m.Vb(39,"div",36),m.Vb(40,"button",37),m.dc("click",(function(){m.uc(t);const e=m.hc();return e.addOrUpdate(e.employeeSelected.id)})),m.Cc(41),m.ic(42,"translate"),m.Ub(),m.Vb(43,"button",38),m.dc("click",(function(){m.uc(t);const e=m.hc();return e.goToJobs(e.employeeSelected.id)})),m.Cc(44),m.ic(45,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&t){const t=m.hc();m.Cb(3),m.Dc(m.jc(4,10,"Info")),m.Cb(5),m.nc("src",t.employeeSelected.picture,m.wc),m.Cb(2),m.Ec(" ",t.employeeSelected.firstName+" "+t.employeeSelected.lastName," "),m.Cb(6),m.Ec(" ",t.employeeSelected.email," "),m.Cb(4),m.Ec(" ",m.jc(21,12,"Role")+": "+m.jc(22,14,t.employeeSelected.role)," "),m.Cb(6),m.Ec(" ",m.jc(27,16,t.employeeSelected.position)," "),m.Cb(5),m.Ec(" ",m.kc(32,18,t.employeeSelected.dateOfBirth,"yyyy-MM-dd")," "),m.Cb(5),m.Ec(" ",m.jc(37,21,t.employeeSelected.gender)," "),m.Cb(5),m.Dc(m.jc(42,23,"Update")),m.Cb(3),m.Dc(m.jc(45,25,"Manage-jobs"))}}let J=(()=>{class t{constructor(t,e,i,r,o,c,s){this.fb=t,this.employeeService=e,this.accountService=i,this.router=r,this.toastr=o,this.dialog=c,this.translate=s,this.employees=[],this.employeeFiltered=[],this.employeeSelected=null,this.destroy$=new a.a}ngOnInit(){this.jobs=Object(s.e)(n.d),this.createForm(),this.getEmployees()}createForm(){this.filterForm=this.fb.group({job:"*",id:null})}getEmployees(){this.employeeService.all().pipe(Object(c.a)(this.destroy$)).subscribe(t=>{this.employees=t,this.employeeFiltered=this.employees,this.employeeSelected&&this.selectEmployee(this.employeeSelected.id)},t=>{console.log(t)})}selectEmployee(t){this.employeeSelected=this.employeeFiltered.find(e=>e.id===t)}addOrUpdate(t){const e=this.selectedOrDefaultEmployee(t);this.dialog.open(q,{width:"34%",autoFocus:!0,data:e}).afterClosed().pipe(Object(c.a)(this.destroy$)).subscribe(t=>{t&&this.refreshData(t)})}delete(t){this.accountService.isAdmin||t.role.toUpperCase()!=="Admin".toUpperCase()?this.accountService.getCurrentUser.id!==t.id?Object(s.d)(t.firstName+" "+t.lastName,this.translate)&&this.employeeService.delete(t.id).pipe(Object(c.a)(this.destroy$)).subscribe(()=>this.employees=this.employees.filter(e=>e.id!==t.id),t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)}):alert(this.translate.instant("Not-delete-yourself")):alert(this.translate.instant("Not-allowed"))}goToJobs(t){this.router.navigate(["/job/job-list/",t])}filterJobs(t){this.employeeFiltered="*"!==t?this.employees.filter(t=>t.position.toUpperCase().includes(this.filterForm.value.job.toUpperCase())):this.employees}resetForm(){this.filterForm.reset(),this.employeeSelected=null,this.employeeFiltered=this.employees}refreshData(t){const e=t.data,i=t.action;this.employeeService.get(e).pipe(Object(c.a)(this.destroy$)).subscribe(t=>{Object(s.i)(i,this.employees,t,t=>t.id===e),this.employeeSelected&&this.employeeSelected.id===e&&(this.employeeSelected=t)})}selectedOrDefaultEmployee(t){return t?this.employeeFiltered.find(e=>e.id===t):{id:null,firstName:null,lastName:null,gender:null,dateOfBirth:null,position:null,email:null,role:null,picture:null,contentType:null}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(b.c),m.Pb(u.a),m.Pb(d.a),m.Pb(o.b),m.Pb(p.b),m.Pb(l.b),m.Pb(h.e))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-employee-details"]],decls:54,vars:28,consts:[[1,"row","pl-2"],[1,"col-md-7"],[1,"text-center","my-2"],["novalidate","",3,"formGroup"],[1,"row"],[1,"col-md-5"],["appearance","standard"],["formControlName","job",3,"selectionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","id",3,"selectionChange"],[1,"col-md-2"],[1,"my-auto"],[3,"click"],[1,"px-2","mt-2"],[1,"list-group"],[1,"list-group-item"],[1,"col-md-6","my-auto"],[1,"font-weight-bold"],[1,"col-md-3","my-auto"],[1,"col-md-3"],["mat-raised-button","","color","primary",1,"btn","btn-sm",3,"click"],["class","list-group-item mt-1 border rounded",4,"ngFor","ngForOf"],["class","list-group-item",4,"ngIf"],["class","col-md-4",4,"ngIf"],[1,"list-group-item","mt-1","border","rounded"],["mat-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",1,"ml-3",3,"click"],[1,"col-md-4"],[1,"card"],[1,"card-body","my-auto"],["alt","",1,"img-fluid","rounded","w-75","mb-3","d-block","mx-auto",3,"src"],[1,"text-center"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-inline-flex"],[1,"card-footer"],[1,"d-flex","justify-content-center"],[1,"btn","btn-warning","mx-1",3,"click"],[1,"btn","btn-success","mx-1",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Vb(3,"h3"),m.Cc(4),m.ic(5,"translate"),m.Ub(),m.Ub(),m.Qb(6,"hr"),m.Vb(7,"form",3),m.Vb(8,"div",4),m.Vb(9,"div",5),m.Vb(10,"mat-form-field",6),m.Vb(11,"mat-label"),m.Cc(12),m.ic(13,"translate"),m.Ub(),m.Vb(14,"mat-select",7),m.dc("selectionChange",(function(t){return e.filterJobs(t.value)})),m.Vb(15,"mat-option",8),m.Cc(16),m.ic(17,"translate"),m.Ub(),m.Bc(18,B,3,4,"mat-option",9),m.Ub(),m.Ub(),m.Ub(),m.Vb(19,"div",5),m.Vb(20,"mat-form-field",6),m.Vb(21,"mat-label"),m.Cc(22),m.ic(23,"translate"),m.Ub(),m.Vb(24,"mat-select",10),m.dc("selectionChange",(function(t){return e.selectEmployee(t.value)})),m.Bc(25,Q,2,2,"mat-option",9),m.Ub(),m.Ub(),m.Ub(),m.Vb(26,"div",11),m.Vb(27,"mat-button-toggle-group",12),m.Vb(28,"mat-button-toggle",13),m.dc("click",(function(){return e.resetForm()})),m.Vb(29,"mat-icon"),m.Cc(30,"cached"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(31,"div",14),m.Vb(32,"ul",15),m.Vb(33,"li",16),m.Vb(34,"div",4),m.Vb(35,"div",17),m.Vb(36,"h5",18),m.Vb(37,"i"),m.Cc(38),m.ic(39,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Vb(40,"div",19),m.Vb(41,"h5",18),m.Vb(42,"i"),m.Cc(43),m.ic(44,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Vb(45,"div",20),m.Vb(46,"button",21),m.dc("click",(function(){return e.addOrUpdate(null)})),m.Vb(47,"mat-icon"),m.Cc(48,"add"),m.Ub(),m.Cc(49),m.ic(50,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Bc(51,M,15,7,"li",22),m.Bc(52,A,4,3,"li",23),m.Ub(),m.Ub(),m.Ub(),m.Bc(53,G,46,27,"div",24),m.Ub()),2&t&&(m.Cb(4),m.Dc(m.jc(5,14,"Employee-management")),m.Cb(3),m.nc("formGroup",e.filterForm),m.Cb(5),m.Dc(m.jc(13,16,"Job-pos")),m.Cb(3),m.nc("value","*"),m.Cb(1),m.Ec(" ",m.jc(17,18,"All")," "),m.Cb(2),m.nc("ngForOf",e.jobs),m.Cb(4),m.Dc(m.jc(23,20,"Employee")),m.Cb(3),m.nc("ngForOf",e.employeeFiltered),m.Cb(13),m.Dc(m.jc(39,22,"Employees")),m.Cb(5),m.Dc(m.jc(44,24,"Job-pos")),m.Cb(6),m.Ec(" ",m.jc(50,26,"Create")," "),m.Cb(2),m.nc("ngForOf",e.employeeFiltered),m.Cb(1),m.nc("ngIf",0===e.employeeFiltered.length),m.Cb(1),m.nc("ngIf",e.employeeSelected))},directives:[b.r,b.l,b.f,C.c,C.f,g.a,b.k,b.e,v.n,r.k,$.b,$.a,U.a,f.a,r.l],pipes:[h.d,r.e],styles:[".mat-icon{margin-right:7px}"]}),t})();var _=i("4Q6e");const R=["pictureFile"];function L(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Picture")," ",m.jc(3,4,"is-required")," "))}let H=(()=>{class t{constructor(t,e,i,r){this.employeeService=t,this.toastr=e,this.matDialogRef=i,this.translate=r,this.hasError=!1,this.destroy$=new a.a}ngOnInit(){Object(s.b)(this.toastr)}onUpload(t){this.hasError=!1,this.file=t.target.files[0]}resetForm(){this.hasError=!1,this.pictureFile.nativeElement.value=null,this.file=null}onSubmit(){this.file?this.changePicture():this.hasError=!0}changePicture(){const t=new FormData;t.append("picture",this.file),this.employeeService.updatePicture(t).pipe(Object(c.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.translate.instant("Done"),this.translate.instant("Success")),this.matDialogRef.close({action:n.a.Update})},t=>{this.toastr.error(this.translate.instant("Failed"),this.translate.instant("Error")),console.log(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(u.a),m.Pb(p.b),m.Pb(l.e),m.Pb(h.e))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-change-avatar"]],viewQuery:function(t,e){var i;1&t&&m.Ic(R,!0),2&t&&m.rc(i=m.ec())&&(e.pictureFile=i.first)},decls:29,vars:10,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["multiple","","type","file","accept","image/*",1,"form-control-file",3,"change"],["pictureFile",""],[4,"ngIf"],[1,"row","px-2","mt-4"],[1,"col-md-6"],["mat-raised-button","","type","submit","color","primary",1,"btn-block"],["mat-raised-button","","type","button",1,"btn-block",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Vb(3,"button",3),m.Vb(4,"mat-icon"),m.Cc(5,"close"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"h3",4),m.Cc(7),m.ic(8,"translate"),m.Ub(),m.Qb(9,"hr"),m.Vb(10,"form",5),m.dc("ngSubmit",(function(){return e.onSubmit()})),m.Vb(11,"div",6),m.Vb(12,"label"),m.Cc(13),m.ic(14,"translate"),m.Ub(),m.Qb(15,"br"),m.Vb(16,"input",7,8),m.dc("change",(function(t){return e.onUpload(t)})),m.Ub(),m.Qb(18,"br"),m.Bc(19,L,4,6,"mat-error",9),m.Ub(),m.Vb(20,"div",10),m.Vb(21,"div",11),m.Vb(22,"button",12),m.Cc(23),m.ic(24,"translate"),m.Ub(),m.Ub(),m.Vb(25,"div",11),m.Vb(26,"button",13),m.dc("click",(function(){return e.resetForm()})),m.Vb(27,"mat-icon"),m.Cc(28,"cached"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Cb(7),m.Dc(m.jc(8,4,"Picture")),m.Cb(6),m.Dc(m.jc(14,6,"Choose-pic")),m.Cb(6),m.nc("ngIf",e.hasError),m.Cb(4),m.Ec(" ",m.jc(24,8,"Save")," "))},directives:[f.a,C.g,l.c,U.a,b.r,b.l,b.m,r.l,C.b],pipes:[h.d],styles:["label[_ngcontent-%COMP%]{font-size:16px}"]}),t})();function T(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Fc(" ",m.jc(2,2,"Current-password")," ",m.jc(3,4,"is-required")," "))}function W(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.ic(3,"translate"),m.ic(4,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Gc(" ",m.jc(2,3,"New-password")," ",m.jc(3,5,"is-required"),".",m.jc(4,7,"min-6")," "))}function X(t,e){1&t&&(m.Vb(0,"mat-error"),m.Cc(1),m.ic(2,"translate"),m.Ub()),2&t&&(m.Cb(1),m.Ec(" ",m.jc(2,1,"Pass-not-match")," "))}let K=(()=>{class t{constructor(t,e,i,r,o){this.authService=t,this.toastr=e,this.fb=i,this.matDialogRef=r,this.trasnlate=o,this.hideCurrent=!0,this.hideNewPassword=!0,this.hideConfirm=!0,this.destroy$=new a.a,this.hasCustomError=(t,e)=>Object(s.g)(t,e)}ngOnInit(){this.createForm(),Object(s.b)(this.toastr)}createForm(){this.passwordForm=this.fb.group({currentPassword:[null,[b.q.required]],newPassword:[null,[b.q.required,b.q.minLength(6)]],confirmPassword:[null,[b.q.required]]})}onSubmit(){this.passwordForm.valid?this.changePassword():this.passwordForm.markAllAsTouched()}checkPasswordsMatch(t){const e=this.passwordForm.value;return!(!e.newPassword||!e.confirmPassword||e.newPassword!==e.confirmPassword&&(this.passwordForm.get("confirmPassword").setErrors({error:"New password does not match with confirm password"}),1))}changePassword(){if(!this.checkPasswordsMatch(null))return!1;this.authService.changePassword(this.passwordForm.value).pipe(Object(c.a)(this.destroy$)).subscribe(()=>{this.toastr.success(this.trasnlate.instant("Changed"),this.trasnlate.instant("Success")),this.matDialogRef.close()},t=>{this.toastr.error(this.trasnlate.instant("Failed"),this.trasnlate.instant("Error")),console.log(t)})}resetForm(){this.passwordForm.reset()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(d.a),m.Pb(p.b),m.Pb(b.c),m.Pb(l.e),m.Pb(h.e))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-change-password"]],decls:47,vars:31,consts:[[1,"container"],[1,"form-group","float-right"],[1,"text-right"],["mat-icon-button","","matSuffix","","mat-dialog-close",""],[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],["appearance","standard"],["matInput","","formControlName","currentPassword",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[4,"ngIf"],["matInput","","formControlName","newPassword",3,"type","input"],["matInput","","formControlName","confirmPassword",3,"type","input"],[1,"row","px-2","mt-4"],[1,"col-md-6"],["mat-raised-button","","type","submit","color","primary",1,"btn-block"],["mat-raised-button","","type","button",1,"btn-block",3,"click"]],template:function(t,e){1&t&&(m.Vb(0,"div",0),m.Vb(1,"div",1),m.Vb(2,"div",2),m.Vb(3,"button",3),m.Vb(4,"mat-icon"),m.Cc(5,"close"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Vb(6,"h3",4),m.Cc(7),m.ic(8,"translate"),m.Ub(),m.Qb(9,"hr"),m.Vb(10,"form",5),m.dc("ngSubmit",(function(){return e.onSubmit()})),m.Vb(11,"mat-form-field",6),m.Vb(12,"mat-label"),m.Cc(13),m.ic(14,"translate"),m.Ub(),m.Qb(15,"input",7),m.Vb(16,"button",8),m.dc("click",(function(){return e.hideCurrent=!e.hideCurrent})),m.Vb(17,"mat-icon"),m.Cc(18),m.Ub(),m.Ub(),m.Bc(19,T,4,6,"mat-error",9),m.Ub(),m.Vb(20,"mat-form-field",6),m.Vb(21,"mat-label"),m.Cc(22),m.ic(23,"translate"),m.Ub(),m.Vb(24,"input",10),m.dc("input",(function(t){return e.checkPasswordsMatch(t.value)})),m.Ub(),m.Vb(25,"button",8),m.dc("click",(function(){return e.hideNewPassword=!e.hideNewPassword})),m.Vb(26,"mat-icon"),m.Cc(27),m.Ub(),m.Ub(),m.Bc(28,W,5,9,"mat-error",9),m.Ub(),m.Vb(29,"mat-form-field",6),m.Vb(30,"mat-label"),m.Cc(31),m.ic(32,"translate"),m.Ub(),m.Vb(33,"input",11),m.dc("input",(function(t){return e.checkPasswordsMatch(t.value)})),m.Ub(),m.Vb(34,"button",8),m.dc("click",(function(){return e.hideConfirm=!e.hideConfirm})),m.Vb(35,"mat-icon"),m.Cc(36),m.Ub(),m.Ub(),m.Bc(37,X,3,3,"mat-error",9),m.Ub(),m.Vb(38,"div",12),m.Vb(39,"div",13),m.Vb(40,"button",14),m.Cc(41),m.ic(42,"translate"),m.Ub(),m.Ub(),m.Vb(43,"div",13),m.Vb(44,"button",15),m.dc("click",(function(){return e.resetForm()})),m.Vb(45,"mat-icon"),m.Cc(46,"cached"),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub(),m.Ub()),2&t&&(m.Cb(7),m.Dc(m.jc(8,21,"Password")),m.Cb(3),m.nc("formGroup",e.passwordForm),m.Cb(3),m.Dc(m.jc(14,23,"Current-password")),m.Cb(2),m.nc("type",e.hideCurrent?"password":"text"),m.Cb(1),m.Db("aria-label","Hide password")("aria-pressed",e.hideCurrent),m.Cb(2),m.Dc(e.hideCurrent?"visibility_off":"visibility"),m.Cb(1),m.nc("ngIf",e.hasCustomError(e.passwordForm,"currentPassword")),m.Cb(3),m.Dc(m.jc(23,25,"New-password")),m.Cb(2),m.nc("type",e.hideNewPassword?"password":"text"),m.Cb(1),m.Db("aria-label","Hide password")("aria-pressed",e.hideNewPassword),m.Cb(2),m.Dc(e.hideNewPassword?"visibility_off":"visibility"),m.Cb(1),m.nc("ngIf",e.hasCustomError(e.passwordForm,"newPassword")),m.Cb(3),m.Dc(m.jc(32,27,"Confirm-password")),m.Cb(2),m.nc("type",e.hideConfirm?"password":"text"),m.Cb(1),m.Db("aria-label","Hide password")("aria-pressed",e.hideConfirm),m.Cb(2),m.Dc(e.hideConfirm?"visibility_off":"visibility"),m.Cb(1),m.nc("ngIf",e.hasCustomError(e.passwordForm,"confirmPassword")),m.Cb(4),m.Ec(" ",m.jc(42,29,"Change-password")," "))},directives:[f.a,C.g,l.c,U.a,b.r,b.l,b.f,C.c,C.f,y.b,b.b,b.k,b.e,r.l,C.b],pipes:[h.d],styles:[""]}),t})();var z=i("Xa2L");function Y(t,e){if(1&t){const t=m.Wb();m.Vb(0,"div",2),m.Vb(1,"div",3),m.Qb(2,"img",4),m.Vb(3,"h4",5),m.Cc(4),m.Ub(),m.Qb(5,"br"),m.Vb(6,"ul",6),m.Vb(7,"li",7),m.Vb(8,"mat-icon"),m.Cc(9,"email"),m.Ub(),m.Cc(10),m.Ub(),m.Vb(11,"li",7),m.Vb(12,"mat-icon"),m.Cc(13," vpn_key"),m.Ub(),m.Cc(14),m.ic(15,"translate"),m.Ub(),m.Vb(16,"li",7),m.Vb(17,"mat-icon"),m.Cc(18,"business_center"),m.Ub(),m.Cc(19),m.Ub(),m.Vb(20,"li",7),m.Vb(21,"mat-icon"),m.Cc(22,"perm_contact_calendar"),m.Ub(),m.Cc(23),m.ic(24,"date"),m.Ub(),m.Vb(25,"li",7),m.Vb(26,"mat-icon"),m.Cc(27,"person"),m.Ub(),m.Cc(28),m.Ub(),m.Ub(),m.Ub(),m.Vb(29,"div",8),m.Vb(30,"div",9),m.Vb(31,"button",10),m.dc("click",(function(){return m.uc(t),m.hc().changeAvatar()})),m.Cc(32),m.ic(33,"translate"),m.Ub(),m.Vb(34,"button",11),m.dc("click",(function(){return m.uc(t),m.hc().changePassword()})),m.Cc(35),m.ic(36,"translate"),m.Ub(),m.Ub(),m.Ub(),m.Ub()}if(2&t){const t=m.hc();m.Cb(2),m.nc("src",t.employee.picture,m.wc),m.Cb(2),m.Ec(" ",t.employee.firstName+" "+t.employee.lastName," "),m.Cb(6),m.Ec(" ",t.employee.email," "),m.Cb(4),m.Ec(" ",m.jc(15,9,"Role")+": "+t.employee.role," "),m.Cb(5),m.Ec(" ",t.employee.position," "),m.Cb(4),m.Ec(" ",m.kc(24,11,t.employee.dateOfBirth,"yyyy-MM-dd")," "),m.Cb(5),m.Ec(" ",t.employee.gender," "),m.Cb(4),m.Ec(" ",m.jc(33,14,"Change-avatar")," "),m.Cb(3),m.Ec(" ",m.jc(36,16,"Change-password")," ")}}function Z(t,e){1&t&&m.Qb(0,"mat-spinner",12)}const tt=[{path:"",component:J,canActivate:[_.a],canLoad:[_.a]},{path:"profile",component:(()=>{class t{constructor(t,e){this.employeeService=t,this.matDialog=e,this.employee=null,this.destroy$=new a.a}ngOnInit(){this.getProfile()}getProfile(){this.employeeService.profile().pipe(Object(c.a)(this.destroy$)).subscribe(t=>this.employee=t)}changeAvatar(){this.matDialog.open(H,{width:"30%",autoFocus:!0}).afterClosed().pipe(Object(c.a)(this.destroy$)).subscribe(t=>{t&&this.getProfile()})}changePassword(){this.matDialog.open(K,{width:"30%",autoFocus:!0})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(m.Pb(u.a),m.Pb(l.b))},t.\u0275cmp=m.Jb({type:t,selectors:[["app-profile"]],decls:2,vars:2,consts:[["class","card col-md-5 d-block mx-auto mt-4",4,"ngIf"],["class","d-block mx-auto mt-5",4,"ngIf"],[1,"card","col-md-5","d-block","mx-auto","mt-4"],[1,"card-body","my-auto"],[1,"img-fluid","mb-3","d-block","mx-auto",3,"src"],[1,"text-center"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-inline-flex"],[1,"card-footer"],[1,"d-flex","justify-content-center"],["mat-raised-button","","color","primary",1,"mx-2",3,"click"],["mat-raised-button","","color","accent",1,"mx-2",3,"click"],[1,"d-block","mx-auto","mt-5"]],template:function(t,e){1&t&&(m.Bc(0,Y,37,18,"div",0),m.Bc(1,Z,1,0,"mat-spinner",1)),2&t&&(m.nc("ngIf",e.employee),m.Cb(1),m.nc("ngIf",!e.employee))},directives:[r.l,U.a,f.a,z.b],pipes:[h.d,r.e],styles:["img[_ngcontent-%COMP%]{height:250px!important;width:auto}"]}),t})()}];let et=(()=>{class t{}return t.\u0275mod=m.Nb({type:t}),t.\u0275inj=m.Mb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(tt)],o.e]}),t})();var it=i("PCNd");let rt=(()=>{class t{}return t.\u0275mod=m.Nb({type:t}),t.\u0275inj=m.Mb({factory:function(e){return new(e||t)},imports:[[r.c,et,it.a]]}),t})()}}]);